import{d as O,r as y,a as P,o as b,c as w,b as l,e as X,f as W,m as Q,n as M,t as _,g as V,w as L,u as p,F as Z,h as K,T as Ve,i as ue,v as tt,j as de,k as ke,p as ze,l as Ne,_ as ve,q as at,s as rt,x as F,y as Re,z as st,A as nt,B as ot,C as Fe,D as Be,E as me,G as I,H as Ue,I as U,J as se,K as it,L as lt,M as ct,N as ut,O as dt,P as mt,Q as pt,R as ft,S as xe}from"./index-96df79b1.js";import{V as re,f as vt,a as gt,d as ht,b as le,g as $t,c as bt}from"./VehiclesService-67409f6d.js";const yt="/vue-ts-composition-ecommerce/map-pin.svg",qe="/vue-ts-composition-ecommerce/delete-icon.svg",xt={class:"relative block"},Pt={class:"absolute inset-y-0 left-0 flex items-center pl-4"},wt=l("img",{src:yt,alt:"Map Pin"},null,-1),_t={key:0,src:qe,alt:"Cross"},Ct=["value"],Vt={key:0,class:"absolute z-10 mt-2 max-h-[30vh] w-full overflow-y-auto overflow-x-hidden rounded-[10px] bg-white shadow-inputBase"},kt=["onMousedown"],Rt={class:"pl-[52px]"},Ft={key:1,class:"absolute z-10 mt-2 flex h-[56px] w-full items-center overflow-y-auto overflow-x-hidden rounded-[10px] bg-white text-gray-500 shadow-inputBase"},Bt=l("li",{class:"py-2 transition first-of-type:rounded-t-[10px] first-of-type:rounded-b-none last-of-type:rounded-t-none last-of-type:rounded-b-[10px]"},[l("span",{class:"pl-[52px]"},"Nothing is found...")],-1),Ot=[Bt],St={class:"mt-1 text-xs text-error"},Oe=O({__name:"BaseAutocomplete",props:{listData:{type:Array},modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a=y({focused:!1,touched:!1}),r=P(()=>{var c;return(c=t.listData)==null?void 0:c.filter(v=>v.toLowerCase().includes(t.modelValue.toLowerCase()))}),n=c=>{a.value.touched=!0,s("update:modelValue",c)},m=c=>{a.value.touched=!0,s("update:modelValue",c)},o=()=>{s("update:modelValue","")},u=()=>a.value.focused=!0,d=()=>a.value.focused=!1;return(c,v)=>(b(),w("div",null,[l("div",xt,[l("span",Pt,[X(c.$slots,"icon-left",{},()=>[wt])]),l("span",{class:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-4",onClick:o},[X(c.$slots,"icon-right",{},()=>[e.modelValue?(b(),w("img",_t)):W("",!0)])]),l("input",Q({name:"input",value:e.modelValue,onInput:v[0]||(v[0]=f=>n(f.target.value)),onFocus:u,onBlur:d},c.$attrs,{placeholder:"1",class:["peer block h-12 w-full rounded-[10px] px-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none",{"border-[1px] border-error text-error":e.error}]}),null,16,Ct),l("label",{for:"input",class:M(["pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium",{"text-error":e.error}])},_(e.label),3),V(Ve,{name:"fade",mode:"out-in"},{default:L(()=>{var f,g;return[a.value.focused&&((f=p(r))!=null&&f.length)?(b(),w("ul",Vt,[(b(!0),w(Z,null,K(p(r),i=>(b(),w("li",{class:"cursor-pointer py-2 transition first-of-type:rounded-t-[10px] first-of-type:rounded-b-none last-of-type:rounded-t-none last-of-type:rounded-b-[10px] hover:font-semibold",key:i,onMousedown:h=>m(i)},[l("span",Rt,_(i),1)],40,kt))),128))])):a.value.focused&&!((g=p(r))!=null&&g.length)?(b(),w("ul",Ft,Ot)):W("",!0)]}),_:1})]),l("span",St,_(e.error),1)]))}}),jt="/vue-ts-composition-ecommerce/checkbox-checked-img.svg",Tt=["title","for"],Lt=["id","value"],Mt={class:"absolute top-[3px] right-[0.5rem] z-10 w-6",src:jt,alt:"checked-icon"},Et=l("span",{class:"absolute right-[0.5rem] h-4 w-3 bg-inherit"},null,-1),At={class:"line-clamp-1"},Ge=O({__name:"BaseCheckBox",props:{modelValue:{type:[Array,Boolean]},inputBgClass:null,value:null,label:null,id:null},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a=P({get(){return t.modelValue},set(n){n&&s("update:modelValue",n)}}),r=P(()=>Array.isArray(t.modelValue)&&t.value?t.modelValue.includes(t.value):t.modelValue);return(n,m)=>(b(),w("label",{title:e.label,class:M(["relative flex h-full cursor-pointer items-center",{"font-semibold":p(r)}]),for:e.id},[l("div",{class:M(["relative",e.inputBgClass])},[ue(l("input",{class:"form-checkbox my-1 mr-3 cursor-pointer rounded border p-3 text-transparent checked:border-gray-800 checked:hover:border-gray-800 focus:ring-0 focus:ring-offset-0 checked:focus:border-gray-800",id:e.id,type:"checkbox","onUpdate:modelValue":m[0]||(m[0]=o=>de(a)?a.value=o:null),value:e.value},null,8,Lt),[[tt,p(a)]]),V(Ve,{name:"fade"},{default:L(()=>[ue(l("img",Mt,null,512),[[ke,p(r)]])]),_:1}),Et],2),l("span",At,_(e.label),1)],10,Tt))}}),Dt="/vue-ts-composition-ecommerce/calendar.svg",It=e=>(ze("data-v-70cbd387"),e=e(),Ne(),e),zt={class:"flex w-full flex-col"},Nt={class:"relative w-full"},Ut=It(()=>l("span",{class:"absolute inset-y-0 left-0 flex items-center pl-4"},[l("img",{src:Dt,alt:"Calendar Icon"})],-1)),qt=["src"],Gt=["value","min"],Wt={class:"mt-1 text-xs text-error"},Ht=O({__name:"BaseDatePicker",props:{modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a="/vue-ts-composition-ecommerce/",r=y(),n=new Date().toISOString().slice(0,10),m=y({focused:!1}),o=P(()=>t.modelValue?"/delete-icon.svg":"dropdown-arrow.svg"),u=f=>s("update:modelValue",f),d=()=>{r.value.showPicker(),m.value.focused=!0},c=()=>m.value.focused=!1,v=()=>{t.modelValue&&s("update:modelValue","")};return(f,g)=>(b(),w("div",zt,[l("div",Nt,[Ut,l("span",{class:M(["absolute inset-y-0 right-0 flex items-center px-3 transition",{"rotate-180":m.value.focused&&!t.modelValue}]),onMousedown:v},[l("img",{src:`${p(a)}${p(o)}`,alt:"Cross"},null,8,qt)],34),l("input",{ref_key:"datePicker",ref:r,type:"date",name:"input",value:e.modelValue,min:p(n),onInput:g[0]||(g[0]=i=>u(i.target.value)),onFocus:d,onBlur:c,placeholder:"1",class:M([{"border-[1px] border-error text-error":e.error},"h-12 cursor-text w-full min-w-[95%] rounded-[10px] bg-white px-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out focus:outline-none"])},null,42,Gt),l("label",{for:"input",class:M([{"text-error":e.error},"pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium"])},_(e.label),3)]),l("span",Wt,_(e.error),1)]))}});const Se=ve(Ht,[["__scopeId","data-v-70cbd387"]]),Yt="/vue-ts-composition-ecommerce/clock.svg",Jt=e=>(ze("data-v-b51ef3e5"),e=e(),Ne(),e),Qt={class:"relative block"},Zt=Jt(()=>l("span",{class:"absolute inset-y-0 left-0 flex items-center pl-4"},[l("img",{src:Yt,alt:"Clock Icon"})],-1)),Kt=["src"],Xt=["value"],ea={class:"mt-1 text-xs text-error"},ta=O({__name:"BaseTimePicker",props:{modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a="/vue-ts-composition-ecommerce/",r=y({focused:!1}),n=P(()=>t.modelValue?"/delete-icon.svg":"/dropdown-arrow.svg"),m=y(),o=v=>s("update:modelValue",v),u=()=>{var v;(v=m==null?void 0:m.value)==null||v.showPicker(),r.value.focused=!0},d=()=>r.value.focused=!1,c=()=>{t.modelValue&&s("update:modelValue","")};return(v,f)=>(b(),w("div",null,[l("div",Qt,[Zt,l("span",{class:M(["absolute inset-y-0 right-0 flex items-center px-3 transition",{"rotate-180":r.value.focused&&!t.modelValue}]),onMousedown:c},[l("img",{src:`${p(a)}${p(n)}`,alt:"Cross"},null,8,Kt)],34),l("input",Q({ref_key:"timePicker",ref:m,type:"time",name:"input",value:e.modelValue,onInput:f[0]||(f[0]=g=>o(g.target.value)),onFocus:u,onBlur:d},v.$attrs,{class:[{"border-[1px] border-error text-error":e.error},"peer block h-12 w-full min-w-[95%] cursor-text rounded-[10px] bg-white pl-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none"],placeholder:"1"}),null,16,Xt),l("label",{for:"input",class:M([{"text-error":e.error},"pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium"])},_(e.label),3)]),l("span",ea,_(e.error),1)]))}});const je=ve(ta,[["__scopeId","data-v-b51ef3e5"]]);function Te(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((t,a)=>(s.includes(a)||(t[a]=p(e[a])),t),{})}function pe(e){return typeof e=="function"}function aa(e){return nt(e)||ot(e)}function We(e,s,t){let a=e;const r=s.split(".");for(let n=0;n<r.length;n++){if(!a[r[n]])return t;a=a[r[n]]}return a}function Pe(e,s,t){return P(()=>e.some(a=>We(s,a,{[t]:!1})[t]))}function Le(e,s,t){return P(()=>e.reduce((a,r)=>{const n=We(s,r,{[t]:!1})[t]||[];return a.concat(n)},[]))}function He(e,s,t,a){return e.call(a,p(s),p(t),a)}function Ye(e){return e.$valid!==void 0?!e.$valid:!e}function ra(e,s,t,a,r,n,m){let{$lazy:o,$rewardEarly:u}=r,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],c=arguments.length>8?arguments[8]:void 0,v=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0;const g=y(!!a.value),i=y(0);t.value=!1;const h=F([s,a].concat(d,f),()=>{if(o&&!a.value||u&&!v.value&&!t.value)return;let $;try{$=He(e,s,c,m)}catch(x){$=Promise.reject(x)}i.value++,t.value=!!i.value,g.value=!1,Promise.resolve($).then(x=>{i.value--,t.value=!!i.value,n.value=x,g.value=Ye(x)}).catch(x=>{i.value--,t.value=!!i.value,n.value=x,g.value=!0})},{immediate:!0,deep:typeof s=="object"});return{$invalid:g,$unwatch:h}}function sa(e,s,t,a,r,n,m,o){let{$lazy:u,$rewardEarly:d}=a;const c=()=>({}),v=P(()=>{if(u&&!t.value||d&&!o.value)return!1;let f=!0;try{const g=He(e,s,m,n);r.value=g,f=Ye(g)}catch(g){r.value=g}return f});return{$unwatch:c,$invalid:v}}function na(e,s,t,a,r,n,m,o,u,d,c){const v=y(!1),f=e.$params||{},g=y(null);let i,h;e.$async?{$invalid:i,$unwatch:h}=ra(e.$validator,s,v,t,a,g,r,e.$watchTargets,u,d,c):{$invalid:i,$unwatch:h}=sa(e.$validator,s,t,a,g,r,u,d);const $=e.$message;return{$message:pe($)?P(()=>$(Te({$pending:v,$invalid:i,$params:Te(f),$model:s,$response:g,$validator:n,$propertyPath:o,$property:m}))):$||"",$params:f,$pending:v,$invalid:i,$response:g,$unwatch:h}}function oa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=p(e),t=Object.keys(s),a={},r={},n={};let m=null;return t.forEach(o=>{const u=s[o];switch(!0){case pe(u.$validator):a[o]=u;break;case pe(u):a[o]={$validator:u};break;case o==="$validationGroups":m=u;break;case o.startsWith("$"):n[o]=u;break;default:r[o]=u}}),{rules:a,nestedValidators:r,config:n,validationGroups:m}}function ia(){}const la="__root";function Je(e,s,t){if(t)return s?s(e()):e();try{var a=Promise.resolve(e());return s?a.then(s):a}catch(r){return Promise.reject(r)}}function ca(e,s){return Je(e,ia,s)}function ua(e,s){var t=e();return t&&t.then?t.then(s):s(t)}function da(e){return function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];try{return Promise.resolve(e.apply(this,s))}catch(a){return Promise.reject(a)}}}function ma(e,s,t,a,r,n,m,o,u){const d=Object.keys(e),c=a.get(r,e),v=y(!1),f=y(!1),g=y(0);if(c){if(!c.$partial)return c;c.$unwatch(),v.value=c.$dirty.value}const i={$dirty:v,$path:r,$touch:()=>{v.value||(v.value=!0)},$reset:()=>{v.value&&(v.value=!1)},$commit:()=>{}};return d.length?(d.forEach(h=>{i[h]=na(e[h],s,i.$dirty,n,m,h,t,r,u,f,g)}),i.$externalResults=P(()=>o.value?[].concat(o.value).map((h,$)=>({$propertyPath:r,$property:t,$validator:"$externalResults",$uid:`${r}-externalResult-${$}`,$message:h,$params:{},$response:null,$pending:!1})):[]),i.$invalid=P(()=>{const h=d.some($=>p(i[$].$invalid));return f.value=h,!!i.$externalResults.value.length||h}),i.$pending=P(()=>d.some(h=>p(i[h].$pending))),i.$error=P(()=>i.$dirty.value?i.$pending.value||i.$invalid.value:!1),i.$silentErrors=P(()=>d.filter(h=>p(i[h].$invalid)).map(h=>{const $=i[h];return Re({$propertyPath:r,$property:t,$validator:h,$uid:`${r}-${h}`,$message:$.$message,$params:$.$params,$response:$.$response,$pending:$.$pending})}).concat(i.$externalResults.value)),i.$errors=P(()=>i.$dirty.value?i.$silentErrors.value:[]),i.$unwatch=()=>d.forEach(h=>{i[h].$unwatch()}),i.$commit=()=>{f.value=!0,g.value=Date.now()},a.set(r,e,i),i):(c&&a.set(r,e,i),i)}function pa(e,s,t,a,r,n,m){const o=Object.keys(e);return o.length?o.reduce((u,d)=>(u[d]=_e({validations:e[d],state:s,key:d,parentKey:t,resultsCache:a,globalConfig:r,instance:n,externalResults:m}),u),{}):{}}function fa(e,s,t){const a=P(()=>[s,t].filter(i=>i).reduce((i,h)=>i.concat(Object.values(p(h))),[])),r=P({get(){return e.$dirty.value||(a.value.length?a.value.every(i=>i.$dirty):!1)},set(i){e.$dirty.value=i}}),n=P(()=>{const i=p(e.$silentErrors)||[],h=a.value.filter($=>(p($).$silentErrors||[]).length).reduce(($,x)=>$.concat(...x.$silentErrors),[]);return i.concat(h)}),m=P(()=>{const i=p(e.$errors)||[],h=a.value.filter($=>(p($).$errors||[]).length).reduce(($,x)=>$.concat(...x.$errors),[]);return i.concat(h)}),o=P(()=>a.value.some(i=>i.$invalid)||p(e.$invalid)||!1),u=P(()=>a.value.some(i=>p(i.$pending))||p(e.$pending)||!1),d=P(()=>a.value.some(i=>i.$dirty)||a.value.some(i=>i.$anyDirty)||r.value),c=P(()=>r.value?u.value||o.value:!1),v=()=>{e.$touch(),a.value.forEach(i=>{i.$touch()})},f=()=>{e.$commit(),a.value.forEach(i=>{i.$commit()})},g=()=>{e.$reset(),a.value.forEach(i=>{i.$reset()})};return a.value.length&&a.value.every(i=>i.$dirty)&&v(),{$dirty:r,$errors:m,$invalid:o,$anyDirty:d,$error:c,$pending:u,$touch:v,$reset:g,$silentErrors:n,$commit:f}}function _e(e){const s=da(function(){return ee(),ua(function(){if($.$rewardEarly)return ne(),ca(me)},function(){return Je(me,function(){return new Promise(C=>{if(!q.value)return C(!T.value);const G=F(q,()=>{C(!T.value),G()})})})})});let{validations:t,state:a,key:r,parentKey:n,childResults:m,resultsCache:o,globalConfig:u={},instance:d,externalResults:c}=e;const v=n?`${n}.${r}`:r,{rules:f,nestedValidators:g,config:i,validationGroups:h}=oa(t),$=Object.assign({},u,i),x=r?P(()=>{const C=p(a);return C?p(C[r]):void 0}):a,S=Object.assign({},p(c)||{}),H=P(()=>{const C=p(c);return r?C?p(C[r]):void 0:C}),E=ma(f,x,r,o,v,$,d,H,a),j=pa(g,x,v,o,$,d,H),B={};h&&Object.entries(h).forEach(C=>{let[G,N]=C;B[G]={$invalid:Pe(N,j,"$invalid"),$error:Pe(N,j,"$error"),$pending:Pe(N,j,"$pending"),$errors:Le(N,j,"$errors"),$silentErrors:Le(N,j,"$silentErrors")}});const{$dirty:D,$errors:k,$invalid:T,$anyDirty:J,$error:z,$pending:q,$touch:ee,$reset:he,$silentErrors:te,$commit:ne}=fa(E,j,m),oe=r?P({get:()=>p(x),set:C=>{D.value=!0;const G=p(a),N=p(c);N&&(N[r]=S[r]),de(G[r])?G[r].value=C:G[r]=C}}):null;r&&$.$autoDirty&&F(x,()=>{D.value||ee();const C=p(c);C&&(C[r]=S[r])},{flush:"sync"});function ae(C){return(m.value||{})[C]}function $e(){de(c)?c.value=S:Object.keys(S).length===0?Object.keys(c).forEach(C=>{delete c[C]}):Object.assign(c,S)}return Re(Object.assign({},E,{$model:oe,$dirty:D,$error:z,$errors:k,$invalid:T,$anyDirty:J,$pending:q,$touch:ee,$reset:he,$path:v||la,$silentErrors:te,$validate:s,$commit:ne},m&&{$getResultsForChild:ae,$clearExternalResults:$e,$validationGroups:B},j))}class va{constructor(){this.storage=new Map}set(s,t,a){this.storage.set(s,{rules:t,result:a})}checkRulesValidity(s,t,a){const r=Object.keys(a),n=Object.keys(t);return n.length!==r.length||!n.every(o=>r.includes(o))?!1:n.every(o=>t[o].$params?Object.keys(t[o].$params).every(u=>p(a[o].$params[u])===p(t[o].$params[u])):!0)}get(s,t){const a=this.storage.get(s);if(!a)return;const{rules:r,result:n}=a,m=this.checkRulesValidity(s,t,r),o=n.$unwatch?n.$unwatch:()=>({});return m?n:{$dirty:n.$dirty,$partial:!0,$unwatch:o}}}const ce={COLLECT_ALL:!0,COLLECT_NONE:!1},Me=Symbol("vuelidate#injectChildResults"),Ee=Symbol("vuelidate#removeChildResults");function ga(e){let{$scope:s,instance:t}=e;const a={},r=y([]),n=P(()=>r.value.reduce((c,v)=>(c[v]=p(a[v]),c),{}));function m(c,v){let{$registerAs:f,$scope:g,$stopPropagation:i}=v;i||s===ce.COLLECT_NONE||g===ce.COLLECT_NONE||s!==ce.COLLECT_ALL&&s!==g||(a[f]=c,r.value.push(f))}t.__vuelidateInjectInstances=[].concat(t.__vuelidateInjectInstances||[],m);function o(c){r.value=r.value.filter(v=>v!==c),delete a[c]}t.__vuelidateRemoveInstances=[].concat(t.__vuelidateRemoveInstances||[],o);const u=Fe(Me,[]);Be(Me,t.__vuelidateInjectInstances);const d=Fe(Ee,[]);return Be(Ee,t.__vuelidateRemoveInstances),{childResults:n,sendValidationResultsToParent:u,removeValidationResultsFromParent:d}}function Qe(e){return new Proxy(e,{get(s,t){return typeof s[t]=="object"?Qe(s[t]):P(()=>s[t])}})}let Ae=0;function ha(e,s){var t;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(a=e,e=void 0,s=void 0);let{$registerAs:r,$scope:n=ce.COLLECT_ALL,$stopPropagation:m,$externalResults:o,currentVueInstance:u}=a;const d=u||((t=at())===null||t===void 0?void 0:t.proxy),c=d?d.$options:{};r||(Ae+=1,r=`_vuelidate_${Ae}`);const v=y({}),f=new va,{childResults:g,sendValidationResultsToParent:i,removeValidationResultsFromParent:h}=d?ga({$scope:n,instance:d}):{childResults:y({})};if(!e&&c.validations){const $=c.validations;s=y({}),rt(()=>{s.value=d,F(()=>pe($)?$.call(s.value,new Qe(s.value)):$,x=>{v.value=_e({validations:x,state:s,childResults:g,resultsCache:f,globalConfig:a,instance:d,externalResults:o||d.vuelidateExternalResults})},{immediate:!0})}),a=c.validationsConfig||a}else{const $=de(e)||aa(e)?e:Re(e||{});F($,x=>{v.value=_e({validations:x,state:s,childResults:g,resultsCache:f,globalConfig:a,instance:d??{},externalResults:o})},{immediate:!0})}return d&&(i.forEach($=>$(v,{$registerAs:r,$scope:n,$stopPropagation:m})),st(()=>h.forEach($=>$(r)))),P(()=>Object.assign({},p(v.value),g.value))}function fe(e){return typeof e=="function"}function Ce(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function ge(e){return fe(e.$validator)?Object.assign({},e):{$validator:e}}function Ze(e){return typeof e=="object"?e.$valid:e}function Ke(e){return e.$validator||e}function $a(e,s){if(!Ce(e))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof e}`);if(!Ce(s)&&!fe(s))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const t=ge(s);return t.$params=Object.assign({},t.$params||{},e),t}function ba(e,s){if(!fe(e)&&typeof p(e)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof e}`);if(!Ce(s)&&!fe(s))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const t=ge(s);return t.$message=e,t}function ya(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=ge(e);return Object.assign({},t,{$async:!0,$watchTargets:s})}function xa(e){return{$validator(s){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return p(s).reduce((n,m,o)=>{const u=Object.entries(m).reduce((d,c)=>{let[v,f]=c;const g=e[v]||{},i=Object.entries(g).reduce((h,$)=>{let[x,S]=$;const E=Ke(S).call(this,f,m,o,...a),j=Ze(E);if(h.$data[x]=E,h.$data.$invalid=!j||!!h.$data.$invalid,h.$data.$error=h.$data.$invalid,!j){let B=S.$message||"";const D=S.$params||{};typeof B=="function"&&(B=B({$pending:!1,$invalid:!j,$params:D,$model:f,$response:E})),h.$errors.push({$property:v,$message:B,$params:D,$response:E,$model:f,$pending:!1,$validator:x})}return{$valid:h.$valid&&j,$data:h.$data,$errors:h.$errors}},{$valid:!0,$data:{},$errors:[]});return d.$data[v]=i.$data,d.$errors[v]=i.$errors,{$valid:d.$valid&&i.$valid,$data:d.$data,$errors:d.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:n.$valid&&u.$valid,$data:n.$data.concat(u.$data),$errors:n.$errors.concat(u.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:s=>{let{$response:t}=s;return t?t.$errors.map(a=>Object.values(a).map(r=>r.map(n=>n.$message)).reduce((r,n)=>r.concat(n),[])):[]}}}const Xe=e=>{if(e=p(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let s in e)return!0;return!1}return!!String(e).length},Pa=e=>(e=p(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function Y(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return a=>(a=p(a),!Xe(a)||s.every(r=>r.test(a)))}var De=Object.freeze({__proto__:null,withParams:$a,withMessage:ba,withAsync:ya,forEach:xa,req:Xe,len:Pa,regex:Y,unwrap:p,unwrapNormalizedValidator:Ke,unwrapValidatorResponse:Ze,normalizeValidatorObject:ge});Y(/^[a-zA-Z]*$/);Y(/^[a-zA-Z0-9]*$/);Y(/^\d*(\.\d+)?$/);const wa=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;Y(wa);const _a=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;Y(_a);Y(/(^[0-9]*$)|(^-[0-9]+$)/);Y(/^[-]?\d*(\.\d+)?$/);const we=["New York","Los Angeles","Chicago","Houston","Philadelphia","Phoenix","San Antonio","San Diego","Dallas","San Jose","Austin","Jacksonville","San Francisco","Indianapolis","Columbus","Fort Worth","Charlotte","Seattle","Denver","El Paso","Detroit","Washington","Boston","Memphis","Nashville","Portland, Ore.","Oklahoma City","Las Vegas","Baltimore","Louisville","Milwaukee","Albuquerque","Tucson","Fresno","Sacramento","Kansas City, Mo.","Long Beach","Mesa","Atlanta","Colorado Springs","Virginia Beach","Raleigh","Omaha","Miami","Oakland","Minneapolis","Tulsa","Wichita","New Orleans","Arlington, Texas",""],Ca={key:0,class:"bg-orange-base/5 py-8"},Va=["onSubmit"],ka={class:"container order-2 mx-auto grid items-center gap-4 px-4 pt-10 pb-8 md:order-1 md:grid-cols-2"},Ra={class:"h-full"},Fa={class:"grid h-full gap-4 lg:grid-cols-2"},Ba={class:"grid h-full gap-4 lg:grid-cols-2"},Oa={class:"container mx-auto flex justify-center pb-10"},Sa=O({__name:"LocationAndTimeForm",props:{isLoading:{type:Boolean,default:!1},activeLocationFilters:{type:Object}},emits:["updateLocationFilters"],setup(e,{expose:s,emit:t}){var v;const a=e,r=window.innerWidth>=768,n=y(!1),m=f=>!!we.includes(f),o=y({pickupFrom:((v=a.activeLocationFilters)==null?void 0:v.pickupFrom)||"",dropOff:"",pickupDate:"",pickupTime:"",dropOffDate:"",dropOffTime:""});s({formValues:o}),F(o,f=>{n.value||(o.value.dropOff=f.pickupFrom)},{deep:!0});const u=async()=>{await c.value.$validate()&&t("updateLocationFilters",o.value)},d=P(()=>({pickupFrom:{location_validation:De.withMessage("Select a city from the list",m)},dropOff:{location_validation:De.withMessage("Select a city from the list",m)}})),c=ha(d,o,{$autoDirty:!0});return(f,g)=>(b(),I(Ue,{"initial-visibility":r},{controls:L(({toggleVisibility:i,isTransitioning:h,isVisible:$})=>[!r&&!$?(b(),w("section",Ca,[V(se,{class:"mx-auto block","is-disabled":h,onClick:i},{default:L(()=>[U("Choose Location ")]),_:2},1032,["is-disabled","onClick"])])):W("",!0)]),default:L(({isVisible:i})=>{var h,$;return[i?(b(),w("form",{key:0,onSubmit:it(u,["prevent"]),class:"h-fit bg-orange-base/5"},[l("div",ka,[V(Oe,{modelValue:o.value.pickupFrom,"onUpdate:modelValue":g[0]||(g[0]=x=>o.value.pickupFrom=x),label:"Pick up from","list-data":p(we),error:(h=p(c).pickupFrom.$errors[0])==null?void 0:h.$message},null,8,["modelValue","list-data","error"]),l("div",Ra,[n.value?(b(),I(Oe,{key:0,modelValue:o.value.dropOff,"onUpdate:modelValue":g[1]||(g[1]=x=>o.value.dropOff=x),label:"Drop-off","list-data":p(we),error:($=p(c).dropOff.$errors[0])==null?void 0:$.$message},null,8,["modelValue","list-data","error"])):(b(),I(Ge,{key:1,modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=x=>n.value=x),onChange:g[3]||(g[3]=x=>o.value.dropOff=""),"input-bg-class":"bg-transparent",label:"Return to different location",id:"1"},null,8,["modelValue"]))]),l("div",Fa,[V(Se,{modelValue:o.value.pickupDate,"onUpdate:modelValue":g[4]||(g[4]=x=>o.value.pickupDate=x),label:"Pick up date"},null,8,["modelValue"]),V(je,{modelValue:o.value.pickupTime,"onUpdate:modelValue":g[5]||(g[5]=x=>o.value.pickupTime=x),label:"Pick up time"},null,8,["modelValue"])]),l("div",Ba,[V(Se,{modelValue:o.value.dropOffDate,"onUpdate:modelValue":g[6]||(g[6]=x=>o.value.dropOffDate=x),label:"Drop-off date"},null,8,["modelValue"]),V(je,{modelValue:o.value.dropOffTime,"onUpdate:modelValue":g[7]||(g[7]=x=>o.value.dropOffTime=x),label:"Drop off time"},null,8,["modelValue"])])]),l("div",Oa,[V(se,{loading:e.isLoading,class:"w-[272px]"},{default:L(()=>[U("Search")]),_:1},8,["loading"])])],40,Va)):W("",!0)]}),_:1}))}}),ja="/vue-ts-composition-ecommerce/filters-icon.svg",Ta=["disabled","value"],La=["value"],Ma=["value"],Ea=O({__name:"BaseSelect",props:{selectOptions:{type:Object,required:!0},modelValue:{type:String},isLoading:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:s}){const t=a=>s("update:modelValue",a);return(a,r)=>(b(),w("select",{disabled:e.isLoading,class:M(["cursor-pointer appearance-none px-2 focus:outline-none",{"cursor-progress":e.isLoading}]),value:e.modelValue,onInput:r[0]||(r[0]=n=>t(n.target.value))},[l("option",{value:e.selectOptions.baseOption.value},_(e.selectOptions.baseOption.name),9,La),(b(!0),w(Z,null,K(e.selectOptions.options,n=>(b(),w("option",{key:n.value,value:n.value},_(n.name),9,Ma))),128))],42,Ta))}}),Aa={class:"flex justify-between pb-6"},Da=l("img",{class:"md:hidden",src:ja,alt:"Filters-icon mobile"},null,-1),Ia=[Da],za={class:"flex items-center gap-4"},Na={class:"cursor-pointer"},Ua=["src"],qa=O({__name:"OurCarsCatalogHeading",props:{isLoading:{type:Boolean},sortOrderASC:{type:Boolean},sortBy:{type:String}},emits:["toggle-sort-order","updateSortType","openMobileFilters"],setup(e,{emit:s}){const t=e,a="/vue-ts-composition-ecommerce/",r={baseOption:{value:"rentalCost",name:"Sort by price"},options:[{value:"releaseYear",name:"Sort by year"},{value:"deposit",name:"Sort by deposit"}]},n=P(()=>t.sortOrderASC?"/sort-up.svg":"/sort-down.svg"),m=()=>{t.isLoading||s("toggle-sort-order")};return(o,u)=>(b(),w("div",Aa,[l("div",{onClick:u[0]||(u[0]=d=>o.$emit("openMobileFilters"))},Ia),l("div",za,[V(Ea,{isLoading:e.isLoading,modelValue:e.sortBy,"onUpdate:modelValue":u[1]||(u[1]=d=>o.$emit("updateSortType",d)),selectOptions:r},null,8,["isLoading","modelValue"]),l("span",Na,[l("img",{src:`${p(a)}${p(n)}`,alt:"Sort by icon",onClick:m},null,8,Ua)])])]))}}),Ga="/vue-ts-composition-ecommerce/Icon-wallet.svg",Wa="/vue-ts-composition-ecommerce/Icon-door.svg",Ha="/vue-ts-composition-ecommerce/Icon-seats.svg",Ya="/vue-ts-composition-ecommerce/Icon-stearing-wheel.svg",Ja={class:"rounded-[10px] p-3 shadow-inputBase"},Qa={class:"flex items-center gap-3 border-b pb-3 md:flex-col md:items-stretch md:gap-0 md:border-b-0 md:pb-0"},Za={class:"basis-1/2 rounded-[10px] md:basis-auto md:bg-car-bg"},Ka=["src"],Xa={class:"flex basis-1/2 flex-col items-start justify-center md:block md:basis-auto"},er={class:"inline-block rounded border py-[2.5px] px-1 text-[10px] font-medium text-gray-400 md:mt-4"},tr={class:"pt-1 text-[12px] font-semibold text-base-gray sm:pt-4 sm:text-[22px]"},ar={class:"flex items-center justify-between py-2 md:border-b md:py-4"},rr={class:"text-sm text-orange-base sm:text-base"},sr={class:"text-base font-semibold sm:text-[25px]"},nr=l("span",{class:"text-xs"}," / day",-1),or={class:"hidden text-base text-base-gray md:block"},ir={class:"flex items-center justify-between gap-2 pt-4 text-[12px] font-semibold text-gray-400 sm:pb-8 sm:text-base md:gap-0"},lr={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:hidden md:basis-auto md:bg-transparent md:py-0"},cr=l("img",{class:"h-[17px] pr-2",src:Ga,alt:"Doors icon"},null,-1),ur=l("div",{class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},[l("img",{class:"h-[17px] pr-2",src:Wa,alt:"Doors icon"}),U(" 4 "),l("span",{class:"hidden pl-1 md:block"},"doors")],-1),dr={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},mr=l("img",{class:"h-[17px] pr-2",src:Ha,alt:"Seats icon"},null,-1),pr=l("span",{class:"hidden pl-1 md:block"},"seats",-1),fr={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},vr=l("img",{class:"h-[17px] pr-2",src:Ya,alt:"Transmission icon"},null,-1),gr={class:"pl-1"},hr=O({__name:"CarCard",props:{vehicle:{type:Object,required:!0}},setup(e){const s="/vue-ts-composition-ecommerce/";return(t,a)=>{const r=lt("router-link");return b(),w("div",Ja,[l("div",Qa,[l("div",Za,[l("img",{class:"mx-auto",src:`${p(s)}${e.vehicle.imgPath}`,alt:"Car"},null,8,Ka)]),l("div",Xa,[l("span",er,_(e.vehicle.releaseYear),1),l("h2",tr,_(e.vehicle.model),1),l("div",ar,[l("div",rr,[U(" From "),l("span",sr,"$"+_(e.vehicle.rentalCost),1),nr]),l("div",or,"Deposit "+_(e.vehicle.deposit)+"$",1)])])]),l("div",null,[l("div",ir,[l("div",lr,[cr,U(" "+_(e.vehicle.deposit)+"$ ",1)]),ur,l("div",dr,[mr,U(" "+_(e.vehicle.capacity)+" ",1),pr]),l("div",fr,[vr,l("span",gr,_(e.vehicle.transmission),1)])]),V(r,{to:`/catalog/${e.vehicle.id}`},{default:L(()=>[V(se,{class:"hidden w-full sm:block"},{default:L(()=>[U("Rent now")]),_:1})]),_:1},8,["to"])])])}}}),$r={class:"mb-10 grid gap-4 lg:grid-cols-2"},br=O({__name:"CarCardsBlock",props:{vehicles:{type:Array,required:!0}},setup(e){return(s,t)=>(b(),w("section",$r,[(b(!0),w(Z,null,K(e.vehicles,a=>(b(),I(hr,{key:a.id,vehicle:a},null,8,["vehicle"]))),128))]))}}),yr={class:"mt-4 flex justify-center text-base-gray"},xr=["onClick"],Pr=O({__name:"BasePaginator",props:{totalEntities:null,entitiesPerPage:null,maxVisibleButtons:null,currentPage:null,paginationButtonClass:null},emits:["changeCurrentPage"],setup(e,{emit:s}){const t=e,a=P(()=>Math.ceil(t.totalEntities/t.entitiesPerPage)),r=u=>{u<1||u>a.value||u===t.currentPage||s("changeCurrentPage",u)},n=P(()=>t.currentPage===1?1:t.currentPage===a.value?a.value-t.maxVisibleButtons+1:t.currentPage-1),m=P(()=>Math.min(n.value+t.maxVisibleButtons-1,a.value)),o=P(()=>{const u=[];for(let d=n.value;d<=m.value;d+=1)d!==0&&u.push({name:d,isDisabled:d===t.currentPage});return u});return(u,d)=>(b(),w("section",yr,[l("span",{class:M(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===1}]]),onClick:d[0]||(d[0]=c=>r(1))},"First ",2),(b(!0),w(Z,null,K(p(o),c=>(b(),w("span",{class:M(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===c.name,"cursor-not-allowed":c.isDisabled}]]),key:c.name,onClick:v=>r(c.name)},_(c.name),11,xr))),128)),l("span",{class:M(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===p(a)}]]),onClick:d[1]||(d[1]=c=>r(p(a)))},"Last ",2)]))}}),wr={},_r={class:"mb-10 grid gap-4 lg:grid-cols-2"},Cr=ct('<div class="flex items-center gap-4 md:flex-col md:items-stretch"><div class="mb-4 flex h-[110px] basis-1/2 items-center justify-center rounded bg-gray-300 dark:bg-gray-700 sm:h-[180px] md:h-48 md:basis-auto"></div><div class="flex h-full basis-1/2 flex-col md:basis-auto"><div class="mb-4 h-2.5 w-48 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div></div></div><div class="border-b border-b-gray-200 sm:mb-3 sm:mt-7"></div><div class="py-2 sm:py-4"><div class="flex h-7 gap-2"><div class="flex w-full basis-1/3 rounded bg-gray-200"></div><div class="flex w-full basis-1/3 rounded bg-gray-200"></div><div class="flex w-full basis-1/3 rounded bg-gray-200"></div></div></div><div class="hidden h-12 rounded bg-gray-200 sm:block"></div><span class="sr-only">Loading...</span>',5),Vr=[Cr];function kr(e,s){return b(),w("section",_r,[(b(!0),w(Z,null,K([...Array(6).keys()],(t,a)=>(b(),w("div",{key:a,role:"status",class:"w-full animate-pulse rounded-[10px] border-gray-200 p-4 shadow-inputBase dark:border-gray-700 md:h-[505px]"},Vr))),128))])}const Rr=ve(wr,[["render",kr]]),Fr={class:"col-span-12 mb-4 md:col-span-8 md:col-start-6 lg:col-span-9 lg:col-start-5"},Br={key:1,class:"p-10 text-center text-5xl"},Or={key:2,class:"p-10 text-center text-5xl"},Sr=O({__name:"OurCarsCatalog",props:{vehicles:{type:Array,required:!0},carsTotal:{type:Number,required:!0},currentPage:{type:Number,required:!0},isLoading:{type:Boolean},sortOrderASC:{type:Boolean},sortBy:{type:String},error:{type:String}},emits:["appendPage"],setup(e,{emit:s}){const t=e,a=P(()=>t.currentPage===Math.ceil(t.carsTotal/re)),r=()=>s("appendPage");return(n,m)=>(b(),w("section",Fr,[V(qa,Q(n.$attrs,{"sort-by":e.sortBy,"sort-order-a-s-c":e.sortOrderASC,"is-loading":e.isLoading}),null,16,["sort-by","sort-order-a-s-c","is-loading"]),V(Ve,{name:"fade",mode:"out-in"},{default:L(()=>[e.isLoading?(b(),I(Rr,{key:0})):e.error?(b(),w("h1",Br,"Something went wrong... "+_(e.error),1)):e.vehicles.length?(b(),I(br,{key:3,vehicles:e.vehicles},null,8,["vehicles"])):(b(),w("h1",Or,"Nothing was found"))]),_:1}),e.vehicles.length&&!e.error?(b(),I(se,{key:0,"is-disabled":p(a),loading:e.isLoading,variant:"transparent",class:"w-full",onClick:r},{default:L(()=>[U("Show more")]),_:1},8,["is-disabled","loading"])):W("",!0),e.vehicles.length&&!e.error?(b(),I(Pr,Q({key:1,"max-visible-buttons":3,"current-page":e.currentPage,"total-entities":e.carsTotal,"entities-per-page":p(re)},n.$attrs),null,16,["current-page","total-entities","entities-per-page"])):W("",!0)]))}}),jr="/vue-ts-composition-ecommerce/burger-closed.svg",Tr={class:"relative block"},Lr={class:"absolute inset-y-0 left-0 flex items-center pl-4"},Mr={key:0,src:qe,alt:"Cross"},Er=["value","disabled"],Ar={class:"mt-1 text-xs text-error"},Ie=O({__name:"BaseInput",props:{modelValue:null,label:null,error:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a=y({focused:!1,touched:!1}),r=u=>{a.value.touched=!0,s("update:modelValue",u)},n=()=>{t.disabled||s("update:modelValue",null)},m=()=>a.value.focused=!0,o=()=>a.value.focused=!1;return(u,d)=>(b(),w("div",null,[l("div",Tr,[l("span",Lr,[X(u.$slots,"icon-left")]),l("span",{class:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-4",onClick:n},[X(u.$slots,"icon-right",{},()=>[e.modelValue?(b(),w("img",Mr)):W("",!0)])]),l("input",Q({name:"input",value:e.modelValue,onInput:d[0]||(d[0]=c=>r(c.target.value)),onFocus:m,onBlur:o},u.$attrs,{placeholder:"1",class:["peer block h-12 w-full appearance-none rounded-[10px] px-4 pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none",{"border-[1px] border-error text-error":e.error}],disabled:e.disabled}),null,16,Er),l("label",{for:"input",class:M(["pointer-text pointer-events-none absolute top-1 px-4 text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium",{"text-error":e.error}])},_(e.label),3)]),l("span",Ar,_(e.error),1)]))}}),Dr={class:"relative"},Ir=["min","max","value","title","disabled"],zr=["min","max","title","value","disabled"],Nr=O({__name:"BaseRangeSlider",props:{minPrice:null,maxPrice:null,sliderMinValue:null,sliderMaxValue:null,minGap:null,isLoading:{type:Boolean}},emits:["update:minPrice","update:maxPrice"],setup(e,{emit:s}){const t=e,a=m=>s("update:minPrice",m);F(()=>t.minPrice,m=>{!m||!t.maxPrice||t.maxPrice-m<=t.minGap&&s("update:minPrice",t.maxPrice-t.minGap)});const r=m=>s("update:maxPrice",m);F(()=>t.maxPrice,m=>{m===0&&s("update:maxPrice",null),!(!m||!t.minPrice)&&m-t.minPrice<=t.minGap&&s("update:maxPrice",t.minPrice+t.minGap)});const n=P(()=>{const m=t.minPrice||0,o=t.maxPrice||0,u=(m-t.sliderMinValue)/(t.sliderMaxValue-t.sliderMinValue)*100,d=(o-t.sliderMinValue)/(t.sliderMaxValue-t.sliderMinValue)*100;return`linear-gradient(to right, #8F8F8F ${u}% , #E85638 ${u}% , #E85638 ${d}%, #8F8F8F ${d}%)`});return(m,o)=>(b(),w("div",Dr,[l("div",{class:"slider-track",style:ut({background:p(n)})},null,4),l("input",{type:"range",min:e.sliderMinValue,max:e.sliderMaxValue,value:e.minPrice,title:e.minPrice,disabled:e.isLoading,onInput:o[0]||(o[0]=u=>a(u.target.value))},null,40,Ir),l("input",{type:"range",min:e.sliderMinValue,max:e.sliderMaxValue,title:e.maxPrice,value:e.maxPrice,disabled:e.isLoading,onInput:o[1]||(o[1]=u=>r(u.target.value))},null,40,zr)]))}});const Ur={class:"mb-8"},qr=l("h2",{class:"mb-[20px] font-semibold text-gray-600"},"Rent price (per day)",-1),Gr={class:"flex items-center"},Wr=l("span",{class:"px-1"},"-",-1),Hr={class:"flex flex-col py-6"},Yr=O({__name:"PriceRangeFilter",props:{isLoading:{type:Boolean,default:!1},initialPriceBoundaries:{type:Object,required:!0},priceRange:{type:Object}},emits:["updatePriceRange"],setup(e,{expose:s,emit:t}){var d,c;const a=e,r=y(((d=a.priceRange)==null?void 0:d.minPrice)||a.initialPriceBoundaries.minPrice),n=y(((c=a.priceRange)==null?void 0:c.maxPrice)||a.initialPriceBoundaries.maxPrice);s({minPrice:r,maxPrice:n});const m=p(a.initialPriceBoundaries.minPrice),o=p(a.initialPriceBoundaries.maxPrice),u=P(()=>({minPrice:r.value,maxPrice:n.value}));return F([r,n],()=>t("updatePriceRange",u.value)),(v,f)=>(b(),w("section",Ur,[qr,l("div",Gr,[V(Ie,{disabled:e.isLoading,type:"number",label:"From",modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=g=>r.value=g),modelModifiers:{number:!0}},null,8,["disabled","modelValue"]),Wr,V(Ie,{disabled:e.isLoading,type:"number",label:"To",modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=g=>n.value=g),modelModifiers:{number:!0}},null,8,["disabled","modelValue"])]),l("div",Hr,[V(Nr,{minPrice:r.value,"onUpdate:minPrice":f[2]||(f[2]=g=>r.value=g),minPriceModifiers:{number:!0},maxPrice:n.value,"onUpdate:maxPrice":f[3]||(f[3]=g=>n.value=g),maxPriceModifiers:{number:!0},"min-gap":5,"slider-min-value":p(m),"slider-max-value":p(o),"is-loading":e.isLoading},null,8,["minPrice","maxPrice","slider-min-value","slider-max-value","is-loading"])])]))}}),Jr=["onClick"],Qr={class:"flex"},Zr=l("h2",null,"From",-1),Kr=["src"],Xr={class:"flex flex-col gap-2"},es={class:"flex items-center"},ts={class:"ml-1 text-[13px] text-gray-400"},as=O({__name:"CarCollapsibleFilter",props:{vehiclesCountFilter:null,vehiclesMinRentalCostByFilter:null,filterType:null},setup(e,{expose:s,emit:t}){const a=e,r="/vue-ts-composition-ecommerce/",n=u=>`update${u.charAt(0).toUpperCase()+u.slice(1)}Filters`,m=u=>a.filterType==="babySeat"||a.filterType=="videoRecorder"?u==="true"?"Yes":"No":u,o=y([]);return s({activeCarFilters:o}),F(o,()=>t(n(a.filterType),o.value)),(u,d)=>(b(),I(Ue,{class:"mb-8 w-full","initial-visibility":!0},{controls:L(({toggleVisibility:c,isVisible:v})=>[l("div",{class:"mb-[20px] flex justify-between font-semibold text-gray-600",role:"button",onClick:c},[l("h2",null,_(p(vt)[e.filterType]),1),l("div",Qr,[Zr,l("img",{class:M(["ml-4 transition duration-500",{"rotate-180":v}]),src:`${p(r)}dropdown-arrow.svg`,alt:"Cross"},null,10,Kr)])],8,Jr)]),default:L(({isVisible:c})=>[ue(l("div",null,[l("section",Xr,[(b(!0),w(Z,null,K(e.vehiclesCountFilter,(v,f)=>{var g;return b(),w("div",{class:"flex items-center justify-between",key:f},[l("div",es,[V(Ge,{id:`${e.filterType}${f}`,modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=i=>o.value=i),label:m(f),value:f,"input-bg-class":"bg-white"},null,8,["id","modelValue","label","value"]),l("span",ts," ("+_(v||0)+") ",1)]),l("p",null,"$"+_(((g=e.vehiclesMinRentalCostByFilter)==null?void 0:g[f])||0),1)])}),128))])],512),[[ke,c]])]),_:1}))}}),rs={class:"absolute z-10 h-full w-full cursor-wait backdrop-grayscale"},ss=O({__name:"OurCarsCatalogFilters",props:{isOpen:{type:Boolean},isLoading:{type:Boolean},initialPriceBoundaries:null,priceRange:null,vehiclesCountByFilter:null,minRentalCostByFilter:null},emits:["resetFilters","disableWatchers"],setup(e,{emit:s}){const t=e,a=y(),r=y(),n=async()=>{var c,v,f;s("disableWatchers"),await me(),a.value&&(a.value.minPrice=(c=t.initialPriceBoundaries)==null?void 0:c.minPrice,a.value.maxPrice=(v=t.initialPriceBoundaries)==null?void 0:v.maxPrice),(f=r.value)==null||f.forEach(g=>g.activeCarFilters.length=0),s("resetFilters")},m=P(()=>{var c;return(c=r.value)==null?void 0:c.find(v=>v.activeCarFilters.length!==0)}),o=P(()=>{const{minPrice:c,maxPrice:v}=t.priceRange,{minPrice:f,maxPrice:g}=t.initialPriceBoundaries;return c!==f||v!==g}),u=P(()=>[o.value,m.value]),d=P(()=>!u.value.find(c=>c));return(c,v)=>(b(),w("aside",{class:M(["md:z-1 fixed top-0 left-0 z-10 flex h-fit min-h-[100vh] w-full flex-col items-center overflow-hidden overflow-y-auto bg-white p-5 transition-[opacity] duration-300 ease-in md:pointer-events-auto md:relative md:col-span-4 md:w-auto md:overflow-y-hidden md:p-1 md:opacity-100 lg:col-span-3",e.isOpen?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"])},[ue(l("div",rs,null,512),[[ke,e.isLoading]]),l("img",{onClick:v[0]||(v[0]=f=>c.$emit("closeMobileFilters")),class:"absolute top-0 right-0 p-4 md:hidden",src:jr,alt:"Burger close icon"}),e.initialPriceBoundaries.minPrice?(b(),I(Yr,Q({key:0,ref_key:"priceRangeFilter",ref:a,"initial-price-boundaries":e.initialPriceBoundaries,"price-range":e.priceRange,"is-loading":e.isLoading},c.$attrs),null,16,["initial-price-boundaries","price-range","is-loading"])):W("",!0),e.vehiclesCountByFilter&&e.minRentalCostByFilter?(b(!0),w(Z,{key:1},K(p(gt),f=>(b(),I(as,Q({key:f},c.$attrs,{ref_for:!0,ref_key:"collapsibleFilters",ref:r,"vehicles-count-filter":e.vehiclesCountByFilter[f],"vehicles-min-rental-cost-by-filter":e.minRentalCostByFilter[f],"filter-type":f}),null,16,["vehicles-count-filter","vehicles-min-rental-cost-by-filter","filter-type"]))),128)):W("",!0),V(se,{onClick:n,variant:"transparent",class:"mb-10 w-full md:mb-0","is-disabled":p(d)},{default:L(()=>[U("Reset")]),_:1},8,["is-disabled"])],2))}}),ns={},os={class:"container relative order-3 mx-auto grid h-full grid-cols-12 px-4"};function is(e,s){return b(),w("section",os,[X(e.$slots,"filters"),X(e.$slots,"cars")])}const ls=ve(ns,[["render",is]]),cs={class:"container order-1 mx-auto px-4 md:order-2"},us={class:"py-3 text-2xl font-bold text-gray-600 md:py-10 md:text-3xl"},ds={class:"text-sm font-semibold text-gray-400 md:text-base"},ms=O({__name:"PageHeading",props:{heading:{type:String,required:!0},carsTotal:{type:Number}},setup(e){return(s,t)=>(b(),w("div",cs,[l("h1",us,[U(_(e.heading)+" ",1),l("span",ds,"("+_(e.carsTotal)+")",1)])]))}}),ps=({currentPage:e,sortOrderASC:s,sortBy:t,activeLocationFilters:a,priceRange:r,activeCarTypeFilters:n,activeCarModelFilters:m,activeCarCapacityFilters:o,activeCarTransmissionFilters:u,activeCarDepositFilters:d,activeCarBabySeatFilters:c,activeCarVideoRecorderFilters:v})=>{const f=y([]),g=y(0),i=y(null),h=y(!1),$=y({minPrice:null,maxPrice:null}),x=y(null),S=y(null),H=P(()=>({offset:e.value*re-re,limit:e.value*re-1})),E=async({append:k}={append:!1})=>{if(!h.value)try{i.value=null,h.value=!0,await ht(500);const{data:T,count:J,error:z}=await le.getAllVehicles({sortBy:t.value,sortOrderASC:s.value,offset:H.value.offset,limit:H.value.limit,location:a.value.pickupFrom,priceRange:r.value,carTypes:n.value,carModels:m.value,carCapacities:o.value,carTransmission:u.value,carDeposit:d.value,carBabySeat:c.value,carVideoRecorder:v.value});if(T&&!k&&(f.value=T),T&&k&&f.value.push(...T),(J||J===0)&&(g.value=J),z)throw new Error("Nothing was found...")}catch(T){console.error(T),T instanceof Error&&(i.value=T.message)}finally{h.value=!1}},j=async()=>{const{minPrice:k,maxPrice:T}=await le.getPriceRange();$.value={minPrice:k,maxPrice:T}},B=async()=>{x.value=await le.getVehiclesCountGroupedByFilterType({priceRange:r.value,location:a.value.pickupFrom})},D=async()=>{S.value=await le.getMinRentalCostGroupedByFilterType({priceRange:r.value,location:a.value.pickupFrom})};return dt(async()=>await Promise.all([E(),j(),B(),D()])),{vehicles:f,vehiclesCount:g,errorMessage:i,isLoading:h,fetchVehicles:E,fetchVehiclesCount:B,fetchMinRentalCostByFilterType:D,initialPriceBoundaries:$,vehiclesCountGroupedByFilterType:x,minRentalCostGroupedByFilterType:S}},fs=e=>{const s=mt(),t=pt();for(const a in t.query)e[a]&&(e[a].value=$t(e[a].value,t.query[a]));F(Object.values(e),()=>{const a={};for(const r in e)e[r].value!==""&&e[r].value&&(a[r]=e[r].value);s.push({query:a})},{deep:!0})},vs={class:"flex h-full w-full flex-col"},$s=O({__name:"CatalogPage",setup(e){const s=y(!1),t=()=>r.value=!0,a=async()=>{m.value.pickupFrom="",n.value&&(n.value.formValues.pickupFrom=""),Object.assign(B.value,{minPrice:C.value.minPrice,maxPrice:C.value.maxPrice}),await me(),await Promise.all([A(),be(),ye()]),r.value=!1},r=y(!1),n=y(),m=y({pickupFrom:""}),o=R=>{Object.assign(m.value,R)};F(m,()=>{r.value||(console.log("location watcher trigger"),k.value=1,Promise.all([A(),be(),ye()]))},{deep:!0});const u=y([]),d=R=>u.value=R;F(u,()=>{r.value||(console.log("car types watcher trigger"),k.value=1,A())});const c=y([]),v=R=>c.value=R;F(c,()=>{r.value||(console.log("car models watcher trigger"),k.value=1,A())});const f=y([]),g=R=>f.value=R;F(f,()=>{r.value||(console.log("car capacity watcher trigger"),k.value=1,A())});const i=y([]),h=R=>i.value=R;F(i,()=>{r.value||(console.log("car transmission watcher trigger"),k.value=1,A())});const $=y([]),x=R=>$.value=R;F($,()=>{r.value||(console.log("car deposit watcher trigger"),k.value=1,A())});const S=y([]),H=R=>S.value=R;F(S,()=>{r.value||(console.log("car baby seat watcher trigger"),k.value=1,A())});const E=y([]),j=R=>E.value=R;F(E,()=>{r.value||(console.log("car video recorder watcher trigger"),k.value=1,A())});const B=y({minPrice:0,maxPrice:0}),D=bt(R=>Object.assign(B.value,R),500,r);F(B,()=>{r.value||(console.log("price range watcher trigger"),k.value=1,Promise.all([A(),be(),ye()]))},{deep:!0});const k=y(1),T=()=>{te.value=!0,k.value+=1},J=R=>k.value=R;F(k,()=>{if(console.log("page trigger"),te.value){A({append:!0}),te.value=!1;return}A()});const z=y(!0),q=y("rentalCost"),ee=()=>z.value=!z.value,he=R=>q.value=R;F([q,z],()=>A());const te=y(!1);ft(s);const{vehicles:ne,vehiclesCount:oe,isLoading:ae,errorMessage:$e,initialPriceBoundaries:C,vehiclesCountGroupedByFilterType:G,minRentalCostGroupedByFilterType:N,fetchVehicles:A,fetchVehiclesCount:be,fetchMinRentalCostByFilterType:ye}=ps({currentPage:k,sortOrderASC:z,sortBy:q,activeLocationFilters:m,priceRange:B,activeCarTypeFilters:u,activeCarModelFilters:c,activeCarCapacityFilters:f,activeCarTransmissionFilters:i,activeCarDepositFilters:$,activeCarBabySeatFilters:S,activeCarVideoRecorderFilters:E});return fs({page:k,sortOrderASC:z,sortBy:q,location:xe(m.value,"pickupFrom"),minPrice:xe(B.value,"minPrice"),maxPrice:xe(B.value,"maxPrice")}),(R,ie)=>(b(),w("div",vs,[V(Sa,{ref_key:"locationAndTimeForm",ref:n,"active-location-filters":m.value,"is-loading":p(ae),onUpdateLocationFilters:o},null,8,["active-location-filters","is-loading"]),V(ms,{heading:"Our cars","cars-total":p(oe)},null,8,["cars-total"]),V(ls,null,{filters:L(()=>[V(ss,{"initial-price-boundaries":p(C),"price-range":B.value,"is-open":s.value,"is-loading":p(ae),"vehicles-count-by-filter":p(G),"min-rental-cost-by-filter":p(N),onDisableWatchers:t,onResetFilters:a,onCloseMobileFilters:ie[0]||(ie[0]=et=>s.value=!1),onUpdatePriceRange:p(D),onUpdateCarTypeFilters:d,onUpdateModelFilters:v,onUpdateCapacityFilters:g,onUpdateTransmissionFilters:h,onUpdateDepositFilters:x,onUpdateVideoRecorderFilters:j,onUpdateBabySeatFilters:H},null,8,["initial-price-boundaries","price-range","is-open","is-loading","vehicles-count-by-filter","min-rental-cost-by-filter","onUpdatePriceRange"])]),cars:L(()=>[V(Sr,{"sort-by":q.value,vehicles:p(ne),error:p($e),"is-loading":p(ae),"current-page":k.value,"cars-total":p(oe),"sort-order-a-s-c":z.value,onAppendPage:T,onUpdateSortType:he,onToggleSortOrder:ee,onChangeCurrentPage:J,onOpenMobileFilters:ie[1]||(ie[1]=et=>s.value=!0)},null,8,["sort-by","vehicles","error","is-loading","current-page","cars-total","sort-order-a-s-c"])]),_:1})]))}});export{$s as default};
