import{d as S,r as y,a as x,o as b,c as P,b as l,e as X,f as W,m as Q,n as M,t as C,g as k,w as L,u as f,F as Z,h as K,T as Ce,i as ue,v as et,j as de,k as Ve,p as Ie,l as ze,_ as ve,q as tt,s as at,x as B,y as ke,z as rt,A as st,B as nt,C as Re,D as Fe,E as me,G as I,H as Ne,I as U,J as se,K as ot,L as it,M as lt,N as ct,O as ut,P as dt,Q as mt,R as pt,S as xe}from"./index-2e7eb2f5.js";import{V as re,f as ft,a as vt,d as gt,C as le,g as ht,b as $t}from"./CatalogService-8a4db45a.js";const bt="/vue-ts-composition-ecommerce/map-pin.svg",Ue="/vue-ts-composition-ecommerce/delete-icon.svg",yt={class:"relative block"},xt={class:"absolute inset-y-0 left-0 flex items-center pl-4"},Pt=l("img",{src:bt,alt:"Map Pin"},null,-1),wt={key:0,src:Ue,alt:"Cross"},_t=["value"],Ct={key:0,class:"absolute z-10 mt-2 max-h-[30vh] w-full overflow-y-auto overflow-x-hidden rounded-[10px] bg-white shadow-inputBase"},Vt=["onMousedown"],kt={class:"pl-[52px]"},Rt={key:1,class:"absolute z-10 mt-2 flex h-[56px] w-full items-center overflow-y-auto overflow-x-hidden rounded-[10px] bg-white text-gray-500 shadow-inputBase"},Ft=l("li",{class:"py-2 transition first-of-type:rounded-t-[10px] first-of-type:rounded-b-none last-of-type:rounded-t-none last-of-type:rounded-b-[10px]"},[l("span",{class:"pl-[52px]"},"Nothing is found...")],-1),Bt=[Ft],Ot={class:"mt-1 text-xs text-error"},Be=S({__name:"BaseAutocomplete",props:{listData:{type:Array},modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a=y({focused:!1,touched:!1}),r=x(()=>{var c;return(c=t.listData)==null?void 0:c.filter(p=>p.toLowerCase().includes(t.modelValue.toLowerCase()))}),i=c=>{a.value.touched=!0,s("update:modelValue",c)},u=c=>{a.value.touched=!0,s("update:modelValue",c)},m=()=>{s("update:modelValue","")},o=()=>a.value.focused=!0,d=()=>a.value.focused=!1;return(c,p)=>(b(),P("div",null,[l("div",yt,[l("span",xt,[X(c.$slots,"icon-left",{},()=>[Pt])]),l("span",{class:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-4",onClick:m},[X(c.$slots,"icon-right",{},()=>[e.modelValue?(b(),P("img",wt)):W("",!0)])]),l("input",Q({name:"input",value:e.modelValue,onInput:p[0]||(p[0]=v=>i(v.target.value)),onFocus:o,onBlur:d},c.$attrs,{placeholder:"1",class:["peer block h-12 w-full rounded-[10px] px-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none",{"border-[1px] border-error text-error":e.error}]}),null,16,_t),l("label",{for:"input",class:M(["pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium",{"text-error":e.error}])},C(e.label),3),k(Ce,{name:"fade",mode:"out-in"},{default:L(()=>{var v,g;return[a.value.focused&&((v=f(r))!=null&&v.length)?(b(),P("ul",Ct,[(b(!0),P(Z,null,K(f(r),n=>(b(),P("li",{class:"cursor-pointer py-2 transition first-of-type:rounded-t-[10px] first-of-type:rounded-b-none last-of-type:rounded-t-none last-of-type:rounded-b-[10px] hover:font-semibold",key:n,onMousedown:h=>u(n)},[l("span",kt,C(n),1)],40,Vt))),128))])):a.value.focused&&!((g=f(r))!=null&&g.length)?(b(),P("ul",Rt,Bt)):W("",!0)]}),_:1})]),l("span",Ot,C(e.error),1)]))}}),St="/vue-ts-composition-ecommerce/checkbox-checked-img.svg",jt=["title","for"],Tt=["id","value"],Lt={class:"absolute top-[3px] right-[0.5rem] z-10 w-6",src:St,alt:"checked-icon"},Mt=l("span",{class:"absolute right-[0.5rem] h-4 w-3 bg-inherit"},null,-1),Et={class:"line-clamp-1"},qe=S({__name:"BaseCheckBox",props:{modelValue:{type:[Array,Boolean]},inputBgClass:null,value:null,label:null,id:null},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a=x({get(){return t.modelValue},set(i){i&&s("update:modelValue",i)}}),r=x(()=>Array.isArray(t.modelValue)&&t.value?t.modelValue.includes(t.value):t.modelValue);return(i,u)=>(b(),P("label",{title:e.label,class:M(["relative flex h-full cursor-pointer items-center",{"font-semibold":f(r)}]),for:e.id},[l("div",{class:M(["relative",e.inputBgClass])},[ue(l("input",{class:"form-checkbox my-1 mr-3 cursor-pointer rounded border p-3 text-transparent checked:border-gray-800 checked:hover:border-gray-800 focus:ring-0 focus:ring-offset-0 checked:focus:border-gray-800",id:e.id,type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=m=>de(a)?a.value=m:null),value:e.value},null,8,Tt),[[et,f(a)]]),k(Ce,{name:"fade"},{default:L(()=>[ue(l("img",Lt,null,512),[[Ve,f(r)]])]),_:1}),Mt],2),l("span",Et,C(e.label),1)],10,jt))}}),At="/vue-ts-composition-ecommerce/calendar.svg",Dt=e=>(Ie("data-v-cd9733f6"),e=e(),ze(),e),It={class:"flex w-full flex-col"},zt={class:"relative w-full"},Nt=Dt(()=>l("span",{class:"absolute inset-y-0 left-0 flex items-center pl-4"},[l("img",{src:At,alt:"Calendar Icon"})],-1)),Ut=["src"],qt=["value","min"],Gt={class:"mt-1 text-xs text-error"},Wt=S({__name:"BaseDatePicker",props:{modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a="/vue-ts-composition-ecommerce/",r=y(),i=new Date().toISOString().slice(0,10),u=y({focused:!1}),m=x(()=>t.modelValue?"/delete-icon.svg":"dropdown-arrow.svg"),o=v=>s("update:modelValue",v),d=()=>{r.value.showPicker(),u.value.focused=!0},c=()=>u.value.focused=!1,p=()=>{t.modelValue&&s("update:modelValue","")};return(v,g)=>(b(),P("div",It,[l("div",zt,[Nt,l("span",{class:M(["absolute inset-y-0 right-0 flex items-center px-3 transition",{"rotate-180":u.value.focused&&!t.modelValue}]),onMousedown:p},[l("img",{src:`${f(a)}${f(m)}`,alt:"Cross"},null,8,Ut)],34),l("input",{ref_key:"datePicker",ref:r,type:"date",name:"input",value:e.modelValue,min:f(i),onInput:g[0]||(g[0]=n=>o(n.target.value)),onFocus:d,onBlur:c,placeholder:"1",class:M([{"border-[1px] border-error text-error":e.error},"h-12 cursor-text w-full min-w-[95%] rounded-[10px] bg-white px-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out focus:outline-none"])},null,42,qt),l("label",{for:"input",class:M([{"text-error":e.error},"pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium"])},C(e.label),3)]),l("span",Gt,C(e.error),1)]))}});const Oe=ve(Wt,[["__scopeId","data-v-cd9733f6"]]),Ht="/vue-ts-composition-ecommerce/clock.svg",Yt=e=>(Ie("data-v-8550e742"),e=e(),ze(),e),Jt={class:"relative block"},Qt=Yt(()=>l("span",{class:"absolute inset-y-0 left-0 flex items-center pl-4"},[l("img",{src:Ht,alt:"Clock Icon"})],-1)),Zt=["src"],Kt=["value"],Xt={class:"mt-1 text-xs text-error"},ea=S({__name:"BaseTimePicker",props:{modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a="/vue-ts-composition-ecommerce/",r=y({focused:!1}),i=x(()=>t.modelValue?"/delete-icon.svg":"/dropdown-arrow.svg"),u=y(),m=p=>s("update:modelValue",p),o=()=>{var p;(p=u==null?void 0:u.value)==null||p.showPicker(),r.value.focused=!0},d=()=>r.value.focused=!1,c=()=>{t.modelValue&&s("update:modelValue","")};return(p,v)=>(b(),P("div",null,[l("div",Jt,[Qt,l("span",{class:M(["absolute inset-y-0 right-0 flex items-center px-3 transition",{"rotate-180":r.value.focused&&!t.modelValue}]),onMousedown:c},[l("img",{src:`${f(a)}${f(i)}`,alt:"Cross"},null,8,Zt)],34),l("input",Q({ref_key:"timePicker",ref:u,type:"time",name:"input",value:e.modelValue,onInput:v[0]||(v[0]=g=>m(g.target.value)),onFocus:o,onBlur:d},p.$attrs,{class:[{"border-[1px] border-error text-error":e.error},"peer block h-12 w-full min-w-[95%] cursor-text rounded-[10px] bg-white pl-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none"],placeholder:"1"}),null,16,Kt),l("label",{for:"input",class:M([{"text-error":e.error},"pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium"])},C(e.label),3)]),l("span",Xt,C(e.error),1)]))}});const Se=ve(ea,[["__scopeId","data-v-8550e742"]]);function je(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((t,a)=>(s.includes(a)||(t[a]=f(e[a])),t),{})}function pe(e){return typeof e=="function"}function ta(e){return st(e)||nt(e)}function Ge(e,s,t){let a=e;const r=s.split(".");for(let i=0;i<r.length;i++){if(!a[r[i]])return t;a=a[r[i]]}return a}function Pe(e,s,t){return x(()=>e.some(a=>Ge(s,a,{[t]:!1})[t]))}function Te(e,s,t){return x(()=>e.reduce((a,r)=>{const i=Ge(s,r,{[t]:!1})[t]||[];return a.concat(i)},[]))}function We(e,s,t,a){return e.call(a,f(s),f(t),a)}function He(e){return e.$valid!==void 0?!e.$valid:!e}function aa(e,s,t,a,r,i,u){let{$lazy:m,$rewardEarly:o}=r,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],c=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,v=arguments.length>10?arguments[10]:void 0;const g=y(!!a.value),n=y(0);t.value=!1;const h=B([s,a].concat(d,v),()=>{if(m&&!a.value||o&&!p.value&&!t.value)return;let $;try{$=We(e,s,c,u)}catch(w){$=Promise.reject(w)}n.value++,t.value=!!n.value,g.value=!1,Promise.resolve($).then(w=>{n.value--,t.value=!!n.value,i.value=w,g.value=He(w)}).catch(w=>{n.value--,t.value=!!n.value,i.value=w,g.value=!0})},{immediate:!0,deep:typeof s=="object"});return{$invalid:g,$unwatch:h}}function ra(e,s,t,a,r,i,u,m){let{$lazy:o,$rewardEarly:d}=a;const c=()=>({}),p=x(()=>{if(o&&!t.value||d&&!m.value)return!1;let v=!0;try{const g=We(e,s,u,i);r.value=g,v=He(g)}catch(g){r.value=g}return v});return{$unwatch:c,$invalid:p}}function sa(e,s,t,a,r,i,u,m,o,d,c){const p=y(!1),v=e.$params||{},g=y(null);let n,h;e.$async?{$invalid:n,$unwatch:h}=aa(e.$validator,s,p,t,a,g,r,e.$watchTargets,o,d,c):{$invalid:n,$unwatch:h}=ra(e.$validator,s,t,a,g,r,o,d);const $=e.$message;return{$message:pe($)?x(()=>$(je({$pending:p,$invalid:n,$params:je(v),$model:s,$response:g,$validator:i,$propertyPath:m,$property:u}))):$||"",$params:v,$pending:p,$invalid:n,$response:g,$unwatch:h}}function na(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=f(e),t=Object.keys(s),a={},r={},i={};let u=null;return t.forEach(m=>{const o=s[m];switch(!0){case pe(o.$validator):a[m]=o;break;case pe(o):a[m]={$validator:o};break;case m==="$validationGroups":u=o;break;case m.startsWith("$"):i[m]=o;break;default:r[m]=o}}),{rules:a,nestedValidators:r,config:i,validationGroups:u}}function oa(){}const ia="__root";function Ye(e,s,t){if(t)return s?s(e()):e();try{var a=Promise.resolve(e());return s?a.then(s):a}catch(r){return Promise.reject(r)}}function la(e,s){return Ye(e,oa,s)}function ca(e,s){var t=e();return t&&t.then?t.then(s):s(t)}function ua(e){return function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];try{return Promise.resolve(e.apply(this,s))}catch(a){return Promise.reject(a)}}}function da(e,s,t,a,r,i,u,m,o){const d=Object.keys(e),c=a.get(r,e),p=y(!1),v=y(!1),g=y(0);if(c){if(!c.$partial)return c;c.$unwatch(),p.value=c.$dirty.value}const n={$dirty:p,$path:r,$touch:()=>{p.value||(p.value=!0)},$reset:()=>{p.value&&(p.value=!1)},$commit:()=>{}};return d.length?(d.forEach(h=>{n[h]=sa(e[h],s,n.$dirty,i,u,h,t,r,o,v,g)}),n.$externalResults=x(()=>m.value?[].concat(m.value).map((h,$)=>({$propertyPath:r,$property:t,$validator:"$externalResults",$uid:`${r}-externalResult-${$}`,$message:h,$params:{},$response:null,$pending:!1})):[]),n.$invalid=x(()=>{const h=d.some($=>f(n[$].$invalid));return v.value=h,!!n.$externalResults.value.length||h}),n.$pending=x(()=>d.some(h=>f(n[h].$pending))),n.$error=x(()=>n.$dirty.value?n.$pending.value||n.$invalid.value:!1),n.$silentErrors=x(()=>d.filter(h=>f(n[h].$invalid)).map(h=>{const $=n[h];return ke({$propertyPath:r,$property:t,$validator:h,$uid:`${r}-${h}`,$message:$.$message,$params:$.$params,$response:$.$response,$pending:$.$pending})}).concat(n.$externalResults.value)),n.$errors=x(()=>n.$dirty.value?n.$silentErrors.value:[]),n.$unwatch=()=>d.forEach(h=>{n[h].$unwatch()}),n.$commit=()=>{v.value=!0,g.value=Date.now()},a.set(r,e,n),n):(c&&a.set(r,e,n),n)}function ma(e,s,t,a,r,i,u){const m=Object.keys(e);return m.length?m.reduce((o,d)=>(o[d]=we({validations:e[d],state:s,key:d,parentKey:t,resultsCache:a,globalConfig:r,instance:i,externalResults:u}),o),{}):{}}function pa(e,s,t){const a=x(()=>[s,t].filter(n=>n).reduce((n,h)=>n.concat(Object.values(f(h))),[])),r=x({get(){return e.$dirty.value||(a.value.length?a.value.every(n=>n.$dirty):!1)},set(n){e.$dirty.value=n}}),i=x(()=>{const n=f(e.$silentErrors)||[],h=a.value.filter($=>(f($).$silentErrors||[]).length).reduce(($,w)=>$.concat(...w.$silentErrors),[]);return n.concat(h)}),u=x(()=>{const n=f(e.$errors)||[],h=a.value.filter($=>(f($).$errors||[]).length).reduce(($,w)=>$.concat(...w.$errors),[]);return n.concat(h)}),m=x(()=>a.value.some(n=>n.$invalid)||f(e.$invalid)||!1),o=x(()=>a.value.some(n=>f(n.$pending))||f(e.$pending)||!1),d=x(()=>a.value.some(n=>n.$dirty)||a.value.some(n=>n.$anyDirty)||r.value),c=x(()=>r.value?o.value||m.value:!1),p=()=>{e.$touch(),a.value.forEach(n=>{n.$touch()})},v=()=>{e.$commit(),a.value.forEach(n=>{n.$commit()})},g=()=>{e.$reset(),a.value.forEach(n=>{n.$reset()})};return a.value.length&&a.value.every(n=>n.$dirty)&&p(),{$dirty:r,$errors:u,$invalid:m,$anyDirty:d,$error:c,$pending:o,$touch:p,$reset:g,$silentErrors:i,$commit:v}}function we(e){const s=ua(function(){return ee(),ca(function(){if($.$rewardEarly)return ne(),la(me)},function(){return Ye(me,function(){return new Promise(V=>{if(!q.value)return V(!T.value);const G=B(q,()=>{V(!T.value),G()})})})})});let{validations:t,state:a,key:r,parentKey:i,childResults:u,resultsCache:m,globalConfig:o={},instance:d,externalResults:c}=e;const p=i?`${i}.${r}`:r,{rules:v,nestedValidators:g,config:n,validationGroups:h}=na(t),$=Object.assign({},o,n),w=r?x(()=>{const V=f(a);return V?f(V[r]):void 0}):a,_=Object.assign({},f(c)||{}),H=x(()=>{const V=f(c);return r?V?f(V[r]):void 0:V}),E=da(v,w,r,m,p,$,d,H,a),j=ma(g,w,p,m,$,d,H),O={};h&&Object.entries(h).forEach(V=>{let[G,N]=V;O[G]={$invalid:Pe(N,j,"$invalid"),$error:Pe(N,j,"$error"),$pending:Pe(N,j,"$pending"),$errors:Te(N,j,"$errors"),$silentErrors:Te(N,j,"$silentErrors")}});const{$dirty:D,$errors:R,$invalid:T,$anyDirty:J,$error:z,$pending:q,$touch:ee,$reset:he,$silentErrors:te,$commit:ne}=pa(E,j,u),oe=r?x({get:()=>f(w),set:V=>{D.value=!0;const G=f(a),N=f(c);N&&(N[r]=_[r]),de(G[r])?G[r].value=V:G[r]=V}}):null;r&&$.$autoDirty&&B(w,()=>{D.value||ee();const V=f(c);V&&(V[r]=_[r])},{flush:"sync"});function ae(V){return(u.value||{})[V]}function $e(){de(c)?c.value=_:Object.keys(_).length===0?Object.keys(c).forEach(V=>{delete c[V]}):Object.assign(c,_)}return ke(Object.assign({},E,{$model:oe,$dirty:D,$error:z,$errors:R,$invalid:T,$anyDirty:J,$pending:q,$touch:ee,$reset:he,$path:p||ia,$silentErrors:te,$validate:s,$commit:ne},u&&{$getResultsForChild:ae,$clearExternalResults:$e,$validationGroups:O},j))}class fa{constructor(){this.storage=new Map}set(s,t,a){this.storage.set(s,{rules:t,result:a})}checkRulesValidity(s,t,a){const r=Object.keys(a),i=Object.keys(t);return i.length!==r.length||!i.every(m=>r.includes(m))?!1:i.every(m=>t[m].$params?Object.keys(t[m].$params).every(o=>f(a[m].$params[o])===f(t[m].$params[o])):!0)}get(s,t){const a=this.storage.get(s);if(!a)return;const{rules:r,result:i}=a,u=this.checkRulesValidity(s,t,r),m=i.$unwatch?i.$unwatch:()=>({});return u?i:{$dirty:i.$dirty,$partial:!0,$unwatch:m}}}const ce={COLLECT_ALL:!0,COLLECT_NONE:!1},Le=Symbol("vuelidate#injectChildResults"),Me=Symbol("vuelidate#removeChildResults");function va(e){let{$scope:s,instance:t}=e;const a={},r=y([]),i=x(()=>r.value.reduce((c,p)=>(c[p]=f(a[p]),c),{}));function u(c,p){let{$registerAs:v,$scope:g,$stopPropagation:n}=p;n||s===ce.COLLECT_NONE||g===ce.COLLECT_NONE||s!==ce.COLLECT_ALL&&s!==g||(a[v]=c,r.value.push(v))}t.__vuelidateInjectInstances=[].concat(t.__vuelidateInjectInstances||[],u);function m(c){r.value=r.value.filter(p=>p!==c),delete a[c]}t.__vuelidateRemoveInstances=[].concat(t.__vuelidateRemoveInstances||[],m);const o=Fe(Le,[]);Re(Le,t.__vuelidateInjectInstances);const d=Fe(Me,[]);return Re(Me,t.__vuelidateRemoveInstances),{childResults:i,sendValidationResultsToParent:o,removeValidationResultsFromParent:d}}function Je(e){return new Proxy(e,{get(s,t){return typeof s[t]=="object"?Je(s[t]):x(()=>s[t])}})}let Ee=0;function ga(e,s){var t;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(a=e,e=void 0,s=void 0);let{$registerAs:r,$scope:i=ce.COLLECT_ALL,$stopPropagation:u,$externalResults:m,currentVueInstance:o}=a;const d=o||((t=tt())===null||t===void 0?void 0:t.proxy),c=d?d.$options:{};r||(Ee+=1,r=`_vuelidate_${Ee}`);const p=y({}),v=new fa,{childResults:g,sendValidationResultsToParent:n,removeValidationResultsFromParent:h}=d?va({$scope:i,instance:d}):{childResults:y({})};if(!e&&c.validations){const $=c.validations;s=y({}),at(()=>{s.value=d,B(()=>pe($)?$.call(s.value,new Je(s.value)):$,w=>{p.value=we({validations:w,state:s,childResults:g,resultsCache:v,globalConfig:a,instance:d,externalResults:m||d.vuelidateExternalResults})},{immediate:!0})}),a=c.validationsConfig||a}else{const $=de(e)||ta(e)?e:ke(e||{});B($,w=>{p.value=we({validations:w,state:s,childResults:g,resultsCache:v,globalConfig:a,instance:d??{},externalResults:m})},{immediate:!0})}return d&&(n.forEach($=>$(p,{$registerAs:r,$scope:i,$stopPropagation:u})),rt(()=>h.forEach($=>$(r)))),x(()=>Object.assign({},f(p.value),g.value))}function fe(e){return typeof e=="function"}function _e(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function ge(e){return fe(e.$validator)?Object.assign({},e):{$validator:e}}function Qe(e){return typeof e=="object"?e.$valid:e}function Ze(e){return e.$validator||e}function ha(e,s){if(!_e(e))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof e}`);if(!_e(s)&&!fe(s))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const t=ge(s);return t.$params=Object.assign({},t.$params||{},e),t}function $a(e,s){if(!fe(e)&&typeof f(e)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof e}`);if(!_e(s)&&!fe(s))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const t=ge(s);return t.$message=e,t}function ba(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=ge(e);return Object.assign({},t,{$async:!0,$watchTargets:s})}function ya(e){return{$validator(s){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return f(s).reduce((i,u,m)=>{const o=Object.entries(u).reduce((d,c)=>{let[p,v]=c;const g=e[p]||{},n=Object.entries(g).reduce((h,$)=>{let[w,_]=$;const E=Ze(_).call(this,v,u,m,...a),j=Qe(E);if(h.$data[w]=E,h.$data.$invalid=!j||!!h.$data.$invalid,h.$data.$error=h.$data.$invalid,!j){let O=_.$message||"";const D=_.$params||{};typeof O=="function"&&(O=O({$pending:!1,$invalid:!j,$params:D,$model:v,$response:E})),h.$errors.push({$property:p,$message:O,$params:D,$response:E,$model:v,$pending:!1,$validator:w})}return{$valid:h.$valid&&j,$data:h.$data,$errors:h.$errors}},{$valid:!0,$data:{},$errors:[]});return d.$data[p]=n.$data,d.$errors[p]=n.$errors,{$valid:d.$valid&&n.$valid,$data:d.$data,$errors:d.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:i.$valid&&o.$valid,$data:i.$data.concat(o.$data),$errors:i.$errors.concat(o.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:s=>{let{$response:t}=s;return t?t.$errors.map(a=>Object.values(a).map(r=>r.map(i=>i.$message)).reduce((r,i)=>r.concat(i),[])):[]}}}const Ke=e=>{if(e=f(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let s in e)return!0;return!1}return!!String(e).length},xa=e=>(e=f(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function Y(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return a=>(a=f(a),!Ke(a)||s.every(r=>r.test(a)))}var Ae=Object.freeze({__proto__:null,withParams:ha,withMessage:$a,withAsync:ba,forEach:ya,req:Ke,len:xa,regex:Y,unwrap:f,unwrapNormalizedValidator:Ze,unwrapValidatorResponse:Qe,normalizeValidatorObject:ge});Y(/^[a-zA-Z]*$/);Y(/^[a-zA-Z0-9]*$/);Y(/^\d*(\.\d+)?$/);const Pa=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;Y(Pa);const wa=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;Y(wa);Y(/(^[0-9]*$)|(^-[0-9]+$)/);Y(/^[-]?\d*(\.\d+)?$/);const _a={key:0,class:"bg-orange-base/5 py-8"},Ca=["onSubmit"],Va={class:"container order-2 mx-auto grid items-center gap-4 px-4 pt-10 pb-8 md:order-1 md:grid-cols-2"},ka={class:"h-full"},Ra={class:"grid h-full gap-4 lg:grid-cols-2"},Fa={class:"grid h-full gap-4 lg:grid-cols-2"},Ba={class:"container mx-auto flex justify-center pb-10"},Oa=S({__name:"LocationAndTimeForm",props:{isLoading:{type:Boolean,default:!1},activeLocationFilters:{type:Object}},emits:["updateLocationFilters"],setup(e,{expose:s,emit:t}){var v;const a=e,r=["New York","Los Angeles","Chicago","Houston","Philadelphia","Phoenix","San Antonio","San Diego","Dallas","San Jose","Austin","Jacksonville","San Francisco","Indianapolis","Columbus","Fort Worth","Charlotte","Seattle","Denver","El Paso","Detroit","Washington","Boston","Memphis","Nashville","Portland, Ore.","Oklahoma City","Las Vegas","Baltimore","Louisville","Milwaukee","Albuquerque","Tucson","Fresno","Sacramento","Kansas City, Mo.","Long Beach","Mesa","Atlanta","Colorado Springs","Virginia Beach","Raleigh","Omaha","Miami","Oakland","Minneapolis","Tulsa","Wichita","New Orleans","Arlington, Texas",""],i=window.innerWidth>=768,u=y(!1),m=g=>!!r.includes(g),o=y({pickupFrom:((v=a.activeLocationFilters)==null?void 0:v.pickupFrom)||"",dropOff:"",pickupDate:"",pickupTime:"",dropOffDate:"",dropOffTime:""});s({formValues:o}),B(o,g=>{u.value||(o.value.dropOff=g.pickupFrom)},{deep:!0});const d=async()=>{await p.value.$validate()&&t("updateLocationFilters",o.value)},c=x(()=>({pickupFrom:{location_validation:Ae.withMessage("Select a city from the list",m)},dropOff:{location_validation:Ae.withMessage("Select a city from the list",m)}})),p=ga(c,o,{$autoDirty:!0});return(g,n)=>(b(),I(Ne,{"initial-visibility":i},{controls:L(({toggleVisibility:h,isTransitioning:$,isVisible:w})=>[!i&&!w?(b(),P("section",_a,[k(se,{class:"mx-auto block","is-disabled":$,onClick:h},{default:L(()=>[U("Choose Location ")]),_:2},1032,["is-disabled","onClick"])])):W("",!0)]),default:L(({isVisible:h})=>{var $,w;return[h?(b(),P("form",{key:0,onSubmit:ot(d,["prevent"]),class:"h-fit bg-orange-base/5"},[l("div",Va,[k(Be,{modelValue:o.value.pickupFrom,"onUpdate:modelValue":n[0]||(n[0]=_=>o.value.pickupFrom=_),label:"Pick up from","list-data":r,error:($=f(p).pickupFrom.$errors[0])==null?void 0:$.$message},null,8,["modelValue","error"]),l("div",ka,[u.value?(b(),I(Be,{key:0,modelValue:o.value.dropOff,"onUpdate:modelValue":n[1]||(n[1]=_=>o.value.dropOff=_),label:"Drop-off","list-data":r,error:(w=f(p).dropOff.$errors[0])==null?void 0:w.$message},null,8,["modelValue","error"])):(b(),I(qe,{key:1,modelValue:u.value,"onUpdate:modelValue":n[2]||(n[2]=_=>u.value=_),onChange:n[3]||(n[3]=_=>o.value.dropOff=""),"input-bg-class":"bg-transparent",label:"Return to different location",id:"1"},null,8,["modelValue"]))]),l("div",Ra,[k(Oe,{modelValue:o.value.pickupDate,"onUpdate:modelValue":n[4]||(n[4]=_=>o.value.pickupDate=_),label:"Pick up date"},null,8,["modelValue"]),k(Se,{modelValue:o.value.pickupTime,"onUpdate:modelValue":n[5]||(n[5]=_=>o.value.pickupTime=_),label:"Pick up time"},null,8,["modelValue"])]),l("div",Fa,[k(Oe,{modelValue:o.value.dropOffDate,"onUpdate:modelValue":n[6]||(n[6]=_=>o.value.dropOffDate=_),label:"Drop-off date"},null,8,["modelValue"]),k(Se,{modelValue:o.value.dropOffTime,"onUpdate:modelValue":n[7]||(n[7]=_=>o.value.dropOffTime=_),label:"Drop off time"},null,8,["modelValue"])])]),l("div",Ba,[k(se,{loading:e.isLoading,class:"w-[272px]"},{default:L(()=>[U("Search")]),_:1},8,["loading"])])],40,Ca)):W("",!0)]}),_:1}))}}),Sa="/vue-ts-composition-ecommerce/filters-icon.svg",ja=["disabled","value"],Ta=["value"],La=["value"],Ma=S({__name:"BaseSelect",props:{selectOptions:{type:Object,required:!0},modelValue:{type:String},isLoading:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:s}){const t=a=>s("update:modelValue",a);return(a,r)=>(b(),P("select",{disabled:e.isLoading,class:M(["cursor-pointer appearance-none px-2 focus:outline-none",{"cursor-progress":e.isLoading}]),value:e.modelValue,onInput:r[0]||(r[0]=i=>t(i.target.value))},[l("option",{value:e.selectOptions.baseOption.value},C(e.selectOptions.baseOption.name),9,Ta),(b(!0),P(Z,null,K(e.selectOptions.options,i=>(b(),P("option",{key:i.value,value:i.value},C(i.name),9,La))),128))],42,ja))}}),Ea={class:"flex justify-between pb-6"},Aa=l("img",{class:"md:hidden",src:Sa,alt:"Filters-icon mobile"},null,-1),Da=[Aa],Ia={class:"flex items-center gap-4"},za={class:"cursor-pointer"},Na=["src"],Ua=S({__name:"CarsCatalogHeading",props:{isLoading:{type:Boolean},sortOrderASC:{type:Boolean},sortBy:{type:String}},emits:["toggle-sort-order","updateSortType","openMobileFilters"],setup(e,{emit:s}){const t=e,a="/vue-ts-composition-ecommerce/",r={baseOption:{value:"rentalCost",name:"Sort by price"},options:[{value:"releaseYear",name:"Sort by year"},{value:"deposit",name:"Sort by deposit"}]},i=x(()=>t.sortOrderASC?"/sort-up.svg":"/sort-down.svg"),u=()=>{t.isLoading||s("toggle-sort-order")};return(m,o)=>(b(),P("div",Ea,[l("div",{onClick:o[0]||(o[0]=d=>m.$emit("openMobileFilters"))},Da),l("div",Ia,[k(Ma,{isLoading:e.isLoading,modelValue:e.sortBy,"onUpdate:modelValue":o[1]||(o[1]=d=>m.$emit("updateSortType",d)),selectOptions:r},null,8,["isLoading","modelValue"]),l("span",za,[l("img",{src:`${f(a)}${f(i)}`,alt:"Sort by icon",onClick:u},null,8,Na)])])]))}}),qa="/vue-ts-composition-ecommerce/Icon-wallet.svg",Ga="/vue-ts-composition-ecommerce/Icon-door.svg",Wa="/vue-ts-composition-ecommerce/Icon-seats.svg",Ha="/vue-ts-composition-ecommerce/Icon-stearing-wheel.svg",Ya={class:"rounded-[10px] p-3 shadow-inputBase"},Ja={class:"flex items-center gap-3 border-b pb-3 md:flex-col md:items-stretch md:gap-0 md:border-b-0 md:pb-0"},Qa={class:"basis-1/2 rounded-[10px] md:basis-auto md:bg-car-bg"},Za=["src"],Ka={class:"flex basis-1/2 flex-col items-start justify-center md:block md:basis-auto"},Xa={class:"inline-block rounded border py-[2.5px] px-1 text-[10px] font-medium text-gray-400 md:mt-4"},er={class:"pt-1 text-[12px] font-semibold text-base-gray sm:pt-4 sm:text-[22px]"},tr={class:"flex items-center justify-between py-2 md:border-b md:py-4"},ar={class:"text-sm text-orange-base sm:text-base"},rr={class:"text-base font-semibold sm:text-[25px]"},sr=l("span",{class:"text-xs"}," / day",-1),nr={class:"hidden text-base text-base-gray md:block"},or={class:"flex items-center justify-between gap-2 pt-4 text-[12px] font-semibold text-gray-400 sm:pb-8 sm:text-base md:gap-0"},ir={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:hidden md:basis-auto md:bg-transparent md:py-0"},lr=l("img",{class:"h-[17px] pr-2",src:qa,alt:"Doors icon"},null,-1),cr=l("div",{class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},[l("img",{class:"h-[17px] pr-2",src:Ga,alt:"Doors icon"}),U(" 4 "),l("span",{class:"hidden pl-1 md:block"},"doors")],-1),ur={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},dr=l("img",{class:"h-[17px] pr-2",src:Wa,alt:"Seats icon"},null,-1),mr=l("span",{class:"hidden pl-1 md:block"},"seats",-1),pr={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},fr=l("img",{class:"h-[17px] pr-2",src:Ha,alt:"Transmission icon"},null,-1),vr={class:"pl-1"},gr=S({__name:"CarCard",props:{vehicle:{type:Object,required:!0}},setup(e){const s="/vue-ts-composition-ecommerce/";return(t,a)=>{const r=it("router-link");return b(),P("div",Ya,[l("div",Ja,[l("div",Qa,[l("img",{class:"mx-auto",src:`${f(s)}${e.vehicle.imgPath}`,alt:"Car"},null,8,Za)]),l("div",Ka,[l("span",Xa,C(e.vehicle.releaseYear),1),l("h2",er,C(e.vehicle.model),1),l("div",tr,[l("div",ar,[U(" From "),l("span",rr,"$"+C(e.vehicle.rentalCost),1),sr]),l("div",nr,"Deposit "+C(e.vehicle.deposit)+"$",1)])])]),l("div",null,[l("div",or,[l("div",ir,[lr,U(" "+C(e.vehicle.deposit)+"$ ",1)]),cr,l("div",ur,[dr,U(" "+C(e.vehicle.capacity)+" ",1),mr]),l("div",pr,[fr,l("span",vr,C(e.vehicle.transmission),1)])]),k(r,{to:`/catalog/${e.vehicle.id}`},{default:L(()=>[k(se,{class:"hidden w-full sm:block"},{default:L(()=>[U("Rent now")]),_:1})]),_:1},8,["to"])])])}}}),hr={class:"mb-10 grid gap-4 lg:grid-cols-2"},$r=S({__name:"VehicleCardsSection",props:{vehicles:{type:Array,required:!0}},setup(e){return(s,t)=>(b(),P("section",hr,[(b(!0),P(Z,null,K(e.vehicles,a=>(b(),I(gr,{key:a.id,vehicle:a},null,8,["vehicle"]))),128))]))}}),br={class:"mt-4 flex justify-center text-base-gray"},yr=["onClick"],xr=S({__name:"BasePaginator",props:{totalEntities:null,entitiesPerPage:null,maxVisibleButtons:null,currentPage:null,paginationButtonClass:null},emits:["changeCurrentPage"],setup(e,{emit:s}){const t=e,a=x(()=>Math.ceil(t.totalEntities/t.entitiesPerPage)),r=o=>{o<1||o>a.value||o===t.currentPage||s("changeCurrentPage",o)},i=x(()=>t.currentPage===1?1:t.currentPage===a.value?a.value-t.maxVisibleButtons+1:t.currentPage-1),u=x(()=>Math.min(i.value+t.maxVisibleButtons-1,a.value)),m=x(()=>{const o=[];for(let d=i.value;d<=u.value;d+=1)d!==0&&o.push({name:d,isDisabled:d===t.currentPage});return o});return(o,d)=>(b(),P("section",br,[l("span",{class:M(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===1}]]),onClick:d[0]||(d[0]=c=>r(1))},"First ",2),(b(!0),P(Z,null,K(f(m),c=>(b(),P("span",{class:M(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===c.name,"cursor-not-allowed":c.isDisabled}]]),key:c.name,onClick:p=>r(c.name)},C(c.name),11,yr))),128)),l("span",{class:M(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===f(a)}]]),onClick:d[1]||(d[1]=c=>r(f(a)))},"Last ",2)]))}}),Pr={},wr={class:"mb-10 grid gap-4 lg:grid-cols-2"},_r=lt('<div class="flex items-center gap-4 md:flex-col md:items-stretch"><div class="mb-4 flex h-[110px] basis-1/2 items-center justify-center rounded bg-gray-300 dark:bg-gray-700 sm:h-[180px] md:h-48 md:basis-auto"></div><div class="flex h-full basis-1/2 flex-col md:basis-auto"><div class="mb-4 h-2.5 w-48 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div></div></div><div class="border-b border-b-gray-200 sm:mb-3 sm:mt-7"></div><div class="py-2 sm:py-4"><div class="flex h-7 gap-2"><div class="flex w-full basis-1/3 rounded bg-gray-200"></div><div class="flex w-full basis-1/3 rounded bg-gray-200"></div><div class="flex w-full basis-1/3 rounded bg-gray-200"></div></div></div><div class="hidden h-12 rounded bg-gray-200 sm:block"></div><span class="sr-only">Loading...</span>',5),Cr=[_r];function Vr(e,s){return b(),P("section",wr,[(b(!0),P(Z,null,K([...Array(6).keys()],(t,a)=>(b(),P("div",{key:a,role:"status",class:"w-full animate-pulse rounded-[10px] border-gray-200 p-4 shadow-inputBase dark:border-gray-700 md:h-[505px]"},Cr))),128))])}const kr=ve(Pr,[["render",Vr]]),Rr={class:"col-span-12 mb-4 md:col-span-8 md:col-start-6 lg:col-span-9 lg:col-start-5"},Fr={key:1,class:"p-10 text-center text-5xl"},Br={key:2,class:"p-10 text-center text-5xl"},Or=S({__name:"CarsCatalog",props:{vehicles:{type:Array,required:!0},carsTotal:{type:Number,required:!0},currentPage:{type:Number,required:!0},isLoading:{type:Boolean},sortOrderASC:{type:Boolean},sortBy:{type:String},error:{type:String}},emits:["appendPage"],setup(e,{emit:s}){const t=e,a=x(()=>t.currentPage===Math.ceil(t.carsTotal/re)),r=()=>s("appendPage");return(i,u)=>(b(),P("section",Rr,[k(Ua,Q(i.$attrs,{"sort-by":e.sortBy,"sort-order-a-s-c":e.sortOrderASC,"is-loading":e.isLoading}),null,16,["sort-by","sort-order-a-s-c","is-loading"]),k(Ce,{name:"fade",mode:"out-in"},{default:L(()=>[e.isLoading?(b(),I(kr,{key:0})):e.error?(b(),P("h1",Fr,"Something went wrong... "+C(e.error),1)):e.vehicles.length?(b(),I($r,{key:3,vehicles:e.vehicles},null,8,["vehicles"])):(b(),P("h1",Br,"Nothing was found"))]),_:1}),e.vehicles.length&&!e.error?(b(),I(se,{key:0,"is-disabled":f(a),loading:e.isLoading,variant:"transparent",class:"w-full",onClick:r},{default:L(()=>[U("Show more")]),_:1},8,["is-disabled","loading"])):W("",!0),e.vehicles.length&&!e.error?(b(),I(xr,Q({key:1,"max-visible-buttons":3,"current-page":e.currentPage,"total-entities":e.carsTotal,"entities-per-page":f(re)},i.$attrs),null,16,["current-page","total-entities","entities-per-page"])):W("",!0)]))}}),Sr="/vue-ts-composition-ecommerce/burger-closed.svg",jr={class:"relative block"},Tr={class:"absolute inset-y-0 left-0 flex items-center pl-4"},Lr={key:0,src:Ue,alt:"Cross"},Mr=["value","disabled"],Er={class:"mt-1 text-xs text-error"},De=S({__name:"BaseInput",props:{modelValue:null,label:null,error:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,a=y({focused:!1,touched:!1}),r=o=>{a.value.touched=!0,s("update:modelValue",o)},i=()=>{t.disabled||s("update:modelValue",null)},u=()=>a.value.focused=!0,m=()=>a.value.focused=!1;return(o,d)=>(b(),P("div",null,[l("div",jr,[l("span",Tr,[X(o.$slots,"icon-left")]),l("span",{class:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-4",onClick:i},[X(o.$slots,"icon-right",{},()=>[e.modelValue?(b(),P("img",Lr)):W("",!0)])]),l("input",Q({name:"input",value:e.modelValue,onInput:d[0]||(d[0]=c=>r(c.target.value)),onFocus:u,onBlur:m},o.$attrs,{placeholder:"1",class:["peer block h-12 w-full appearance-none rounded-[10px] px-4 pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none",{"border-[1px] border-error text-error":e.error}],disabled:e.disabled}),null,16,Mr),l("label",{for:"input",class:M(["pointer-text pointer-events-none absolute top-1 px-4 text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium",{"text-error":e.error}])},C(e.label),3)]),l("span",Er,C(e.error),1)]))}}),Ar={class:"relative"},Dr=["min","max","value","title","disabled"],Ir=["min","max","title","value","disabled"],zr=S({__name:"BaseRangeSlider",props:{minPrice:null,maxPrice:null,sliderMinValue:null,sliderMaxValue:null,minGap:null,isLoading:{type:Boolean}},emits:["update:minPrice","update:maxPrice"],setup(e,{emit:s}){const t=e,a=u=>s("update:minPrice",u);B(()=>t.minPrice,u=>{!u||!t.maxPrice||t.maxPrice-u<=t.minGap&&s("update:minPrice",t.maxPrice-t.minGap)});const r=u=>s("update:maxPrice",u);B(()=>t.maxPrice,u=>{u===0&&s("update:maxPrice",null),!(!u||!t.minPrice)&&u-t.minPrice<=t.minGap&&s("update:maxPrice",t.minPrice+t.minGap)});const i=x(()=>{const u=t.minPrice||0,m=t.maxPrice||0,o=(u-t.sliderMinValue)/(t.sliderMaxValue-t.sliderMinValue)*100,d=(m-t.sliderMinValue)/(t.sliderMaxValue-t.sliderMinValue)*100;return`linear-gradient(to right, #8F8F8F ${o}% , #E85638 ${o}% , #E85638 ${d}%, #8F8F8F ${d}%)`});return(u,m)=>(b(),P("div",Ar,[l("div",{class:"slider-track",style:ct({background:f(i)})},null,4),l("input",{type:"range",min:e.sliderMinValue,max:e.sliderMaxValue,value:e.minPrice,title:e.minPrice,disabled:e.isLoading,onInput:m[0]||(m[0]=o=>a(o.target.value))},null,40,Dr),l("input",{type:"range",min:e.sliderMinValue,max:e.sliderMaxValue,title:e.maxPrice,value:e.maxPrice,disabled:e.isLoading,onInput:m[1]||(m[1]=o=>r(o.target.value))},null,40,Ir)]))}});const Nr={class:"mb-8"},Ur=l("h2",{class:"mb-[20px] font-semibold text-gray-600"},"Rent price (per day)",-1),qr={class:"flex items-center"},Gr=l("span",{class:"px-1"},"-",-1),Wr={class:"flex flex-col py-6"},Hr=S({__name:"PriceRangeFilter",props:{isLoading:{type:Boolean,default:!1},initialPriceBoundaries:{type:Object,required:!0},priceRange:{type:Object}},emits:["updatePriceRange"],setup(e,{expose:s,emit:t}){var d,c;const a=e,r=y(((d=a.priceRange)==null?void 0:d.minPrice)||a.initialPriceBoundaries.minPrice),i=y(((c=a.priceRange)==null?void 0:c.maxPrice)||a.initialPriceBoundaries.maxPrice);s({minPrice:r,maxPrice:i});const u=f(a.initialPriceBoundaries.minPrice),m=f(a.initialPriceBoundaries.maxPrice),o=x(()=>({minPrice:r.value,maxPrice:i.value}));return B([r,i],()=>t("updatePriceRange",o.value)),(p,v)=>(b(),P("section",Nr,[Ur,l("div",qr,[k(De,{disabled:e.isLoading,type:"number",label:"From",modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=g=>r.value=g),modelModifiers:{number:!0}},null,8,["disabled","modelValue"]),Gr,k(De,{disabled:e.isLoading,type:"number",label:"To",modelValue:i.value,"onUpdate:modelValue":v[1]||(v[1]=g=>i.value=g),modelModifiers:{number:!0}},null,8,["disabled","modelValue"])]),l("div",Wr,[k(zr,{minPrice:r.value,"onUpdate:minPrice":v[2]||(v[2]=g=>r.value=g),minPriceModifiers:{number:!0},maxPrice:i.value,"onUpdate:maxPrice":v[3]||(v[3]=g=>i.value=g),maxPriceModifiers:{number:!0},"min-gap":5,"slider-min-value":f(u),"slider-max-value":f(m),"is-loading":e.isLoading},null,8,["minPrice","maxPrice","slider-min-value","slider-max-value","is-loading"])])]))}}),Yr=["onClick"],Jr={class:"flex"},Qr=l("h2",null,"From",-1),Zr=["src"],Kr={class:"flex flex-col gap-2"},Xr={class:"flex items-center"},es={class:"ml-1 text-[13px] text-gray-400"},ts=S({__name:"CarCollapsibleFilter",props:{vehiclesCountFilter:null,vehiclesMinRentalCostByFilter:null,filterType:null},setup(e,{expose:s,emit:t}){const a=e,r="/vue-ts-composition-ecommerce/",i=o=>`update${o.charAt(0).toUpperCase()+o.slice(1)}Filters`,u=o=>a.filterType==="babySeat"||a.filterType=="videoRecorder"?o==="true"?"Yes":"No":o,m=y([]);return s({activeCarFilters:m}),B(m,()=>t(i(a.filterType),m.value)),(o,d)=>(b(),I(Ne,{class:"mb-8 w-full","initial-visibility":!0},{controls:L(({toggleVisibility:c,isVisible:p})=>[l("div",{class:"mb-[20px] flex justify-between font-semibold text-gray-600",role:"button",onClick:c},[l("h2",null,C(f(ft)[e.filterType]),1),l("div",Jr,[Qr,l("img",{class:M(["ml-4 transition duration-500",{"rotate-180":p}]),src:`${f(r)}dropdown-arrow.svg`,alt:"Cross"},null,10,Zr)])],8,Yr)]),default:L(({isVisible:c})=>[ue(l("div",null,[l("section",Kr,[(b(!0),P(Z,null,K(e.vehiclesCountFilter,(p,v)=>{var g;return b(),P("div",{class:"flex items-center justify-between",key:v},[l("div",Xr,[k(qe,{id:`${e.filterType}${v}`,modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=n=>m.value=n),label:u(v),value:v,"input-bg-class":"bg-white"},null,8,["id","modelValue","label","value"]),l("span",es," ("+C(p||0)+") ",1)]),l("p",null,"$"+C(((g=e.vehiclesMinRentalCostByFilter)==null?void 0:g[v])||0),1)])}),128))])],512),[[Ve,c]])]),_:1}))}}),as={class:"absolute z-10 h-full w-full cursor-wait backdrop-grayscale"},rs=S({__name:"CarsCatalogFilters",props:{isOpen:{type:Boolean},isLoading:{type:Boolean},initialPriceBoundaries:null,priceRange:null,vehiclesCountByFilter:null,minRentalCostByFilter:null},emits:["resetFilters","disableWatchers"],setup(e,{emit:s}){const t=e,a=y(),r=y(),i=async()=>{var c,p,v;s("disableWatchers"),await me(),a.value&&(a.value.minPrice=(c=t.initialPriceBoundaries)==null?void 0:c.minPrice,a.value.maxPrice=(p=t.initialPriceBoundaries)==null?void 0:p.maxPrice),(v=r.value)==null||v.forEach(g=>g.activeCarFilters.length=0),s("resetFilters")},u=x(()=>{var c;return(c=r.value)==null?void 0:c.find(p=>p.activeCarFilters.length!==0)}),m=x(()=>{const{minPrice:c,maxPrice:p}=t.priceRange,{minPrice:v,maxPrice:g}=t.initialPriceBoundaries;return c!==v||p!==g}),o=x(()=>[m.value,u.value]),d=x(()=>!o.value.find(c=>c));return(c,p)=>(b(),P("aside",{class:M(["md:z-1 fixed top-0 left-0 z-10 flex h-fit min-h-[100vh] w-full flex-col items-center overflow-hidden overflow-y-auto bg-white p-5 transition-[opacity] duration-300 ease-in md:pointer-events-auto md:relative md:col-span-4 md:w-auto md:overflow-y-hidden md:p-1 md:opacity-100 lg:col-span-3",e.isOpen?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"])},[ue(l("div",as,null,512),[[Ve,e.isLoading]]),l("img",{onClick:p[0]||(p[0]=v=>c.$emit("closeMobileFilters")),class:"absolute top-0 right-0 p-4 md:hidden",src:Sr,alt:"Burger close icon"}),e.initialPriceBoundaries.minPrice?(b(),I(Hr,Q({key:0,ref_key:"priceRangeFilter",ref:a,"initial-price-boundaries":e.initialPriceBoundaries,"price-range":e.priceRange,"is-loading":e.isLoading},c.$attrs),null,16,["initial-price-boundaries","price-range","is-loading"])):W("",!0),e.vehiclesCountByFilter&&e.minRentalCostByFilter?(b(!0),P(Z,{key:1},K(f(vt),v=>(b(),I(ts,Q({key:v},c.$attrs,{ref_for:!0,ref_key:"collapsibleFilters",ref:r,"vehicles-count-filter":e.vehiclesCountByFilter[v],"vehicles-min-rental-cost-by-filter":e.minRentalCostByFilter[v],"filter-type":v}),null,16,["vehicles-count-filter","vehicles-min-rental-cost-by-filter","filter-type"]))),128)):W("",!0),k(se,{onClick:i,variant:"transparent",class:"mb-10 w-full md:mb-0","is-disabled":f(d)},{default:L(()=>[U("Reset")]),_:1},8,["is-disabled"])],2))}}),ss={},ns={class:"container relative order-3 mx-auto grid h-full grid-cols-12 px-4"};function os(e,s){return b(),P("section",ns,[X(e.$slots,"filters"),X(e.$slots,"cars")])}const is=ve(ss,[["render",os]]),ls={class:"container order-1 mx-auto px-4 md:order-2"},cs={class:"py-3 text-2xl font-bold text-gray-600 md:py-10 md:text-3xl"},us={class:"text-sm font-semibold text-gray-400 md:text-base"},ds=S({__name:"PageHeading",props:{heading:{type:String,required:!0},carsTotal:{type:Number,required:!0}},setup(e){return(s,t)=>(b(),P("div",ls,[l("h1",cs,[U(C(e.heading)+" ",1),l("span",us,"("+C(e.carsTotal)+")",1)])]))}}),ms=({currentPage:e,sortOrderASC:s,sortBy:t,activeLocationFilters:a,priceRange:r,activeCarTypeFilters:i,activeCarModelFilters:u,activeCarCapacityFilters:m,activeCarTransmissionFilters:o,activeCarDepositFilters:d,activeCarBabySeatFilters:c,activeCarVideoRecorderFilters:p})=>{const v=y([]),g=y(0),n=y(null),h=y(!0),$=y({minPrice:null,maxPrice:null}),w=y(null),_=y(null),H=x(()=>({offset:e.value*re-re,limit:e.value*re-1})),E=async({append:R}={append:!1})=>{try{n.value=null,h.value=!0,await gt(500);const{data:T,count:J,error:z}=await le.getAllVehicles({sortBy:t.value,sortOrderASC:s.value,offset:H.value.offset,limit:H.value.limit,location:a.value.pickupFrom,priceRange:r.value,carTypes:i.value,carModels:u.value,carCapacities:m.value,carTransmission:o.value,carDeposit:d.value,carBabySeat:c.value,carVideoRecorder:p.value});if(T&&!R&&(v.value=T),T&&R&&v.value.push(...T),(J||J===0)&&(g.value=J),z)throw new Error("Nothing was found...")}catch(T){console.error(T),T instanceof Error&&(n.value=T.message)}finally{h.value=!1}},j=async()=>{const{minPrice:R,maxPrice:T}=await le.getPriceRange();$.value={minPrice:R,maxPrice:T}},O=async()=>{w.value=await le.getVehiclesCountGroupedByFilterType({priceRange:r.value,location:a.value.pickupFrom})},D=async()=>{_.value=await le.getMinRentalCostGroupedByFilterType({priceRange:r.value,location:a.value.pickupFrom})};return ut(async()=>await Promise.all([E(),j(),O(),D()])),{vehicles:v,vehiclesCount:g,errorMessage:n,isLoading:h,fetchVehicles:E,fetchVehiclesCount:O,fetchMinRentalCostByFilterType:D,initialPriceBoundaries:$,vehiclesCountGroupedByFilterType:w,minRentalCostGroupedByFilterType:_}},ps=e=>{const s=mt(),t=dt();for(const a in t.query)e[a]&&(e[a].value=ht(e[a].value,t.query[a]));B(Object.values(e),()=>{const a={};for(const r in e)e[r].value!==""&&e[r].value&&(a[r]=e[r].value);s.push({query:a})},{deep:!0})},fs={class:"flex h-full w-full flex-col"},hs=S({__name:"CatalogPage",setup(e){const s=y(!1),t=()=>r.value=!0,a=async()=>{u.value.pickupFrom="",i.value&&(i.value.formValues.pickupFrom=""),Object.assign(O.value,{minPrice:V.value.minPrice,maxPrice:V.value.maxPrice}),await me(),await Promise.all([A(),be(),ye()]),r.value=!1},r=y(!1),i=y(),u=y({pickupFrom:""}),m=F=>{Object.assign(u.value,F)};B(u,()=>{r.value||(console.log("location watcher trigger"),R.value=1,Promise.all([A(),be(),ye()]))},{deep:!0});const o=y([]),d=F=>o.value=F;B(o,()=>{r.value||(console.log("car types watcher trigger"),R.value=1,A())});const c=y([]),p=F=>c.value=F;B(c,()=>{r.value||(console.log("car models watcher trigger"),R.value=1,A())});const v=y([]),g=F=>v.value=F;B(v,()=>{r.value||(console.log("car capacity watcher trigger"),R.value=1,A())});const n=y([]),h=F=>n.value=F;B(n,()=>{r.value||(console.log("car transmission watcher trigger"),R.value=1,A())});const $=y([]),w=F=>$.value=F;B($,()=>{r.value||(console.log("car deposit watcher trigger"),R.value=1,A())});const _=y([]),H=F=>_.value=F;B(_,()=>{r.value||(console.log("car baby seat watcher trigger"),R.value=1,A())});const E=y([]),j=F=>E.value=F;B(E,()=>{r.value||(console.log("car video recorder watcher trigger"),R.value=1,A())});const O=y({minPrice:0,maxPrice:0}),D=$t(F=>Object.assign(O.value,F),500,r);B(O,()=>{r.value||(console.log("price range watcher trigger"),R.value=1,Promise.all([A(),be(),ye()]))},{deep:!0});const R=y(1),T=()=>{te.value=!0,R.value+=1},J=F=>R.value=F;B(R,()=>{if(console.log("page trigger"),te.value){A({append:!0}),te.value=!1;return}A()});const z=y(!0),q=y("rentalCost"),ee=()=>z.value=!z.value,he=F=>q.value=F;B([q,z],()=>A());const te=y(!1);pt(s);const{vehicles:ne,vehiclesCount:oe,isLoading:ae,errorMessage:$e,initialPriceBoundaries:V,vehiclesCountGroupedByFilterType:G,minRentalCostGroupedByFilterType:N,fetchVehicles:A,fetchVehiclesCount:be,fetchMinRentalCostByFilterType:ye}=ms({currentPage:R,sortOrderASC:z,sortBy:q,activeLocationFilters:u,priceRange:O,activeCarTypeFilters:o,activeCarModelFilters:c,activeCarCapacityFilters:v,activeCarTransmissionFilters:n,activeCarDepositFilters:$,activeCarBabySeatFilters:_,activeCarVideoRecorderFilters:E});return ps({page:R,sortOrderASC:z,sortBy:q,location:xe(u.value,"pickupFrom"),minPrice:xe(O.value,"minPrice"),maxPrice:xe(O.value,"maxPrice")}),(F,ie)=>(b(),P("div",fs,[k(Oa,{ref_key:"locationAndTimeForm",ref:i,"active-location-filters":u.value,"is-loading":f(ae),onUpdateLocationFilters:m},null,8,["active-location-filters","is-loading"]),k(ds,{heading:"Our cars","cars-total":f(oe)},null,8,["cars-total"]),k(is,null,{filters:L(()=>[k(rs,{"initial-price-boundaries":f(V),"price-range":O.value,"is-open":s.value,"is-loading":f(ae),"vehicles-count-by-filter":f(G),"min-rental-cost-by-filter":f(N),onDisableWatchers:t,onResetFilters:a,onCloseMobileFilters:ie[0]||(ie[0]=Xe=>s.value=!1),onUpdatePriceRange:f(D),onUpdateCarTypeFilters:d,onUpdateModelFilters:p,onUpdateCapacityFilters:g,onUpdateTransmissionFilters:h,onUpdateDepositFilters:w,onUpdateVideoRecorderFilters:j,onUpdateBabySeatFilters:H},null,8,["initial-price-boundaries","price-range","is-open","is-loading","vehicles-count-by-filter","min-rental-cost-by-filter","onUpdatePriceRange"])]),cars:L(()=>[k(Or,{"sort-by":q.value,vehicles:f(ne),error:f($e),"is-loading":f(ae),"current-page":R.value,"cars-total":f(oe),"sort-order-a-s-c":z.value,onAppendPage:T,onUpdateSortType:he,onToggleSortOrder:ee,onChangeCurrentPage:J,onOpenMobileFilters:ie[1]||(ie[1]=Xe=>s.value=!0)},null,8,["sort-by","vehicles","error","is-loading","current-page","cars-total","sort-order-a-s-c"])]),_:1})]))}});export{hs as default};
