import{d as V,f as h,h as k,b as c,c as g,i as t,r as Z,t as E,v as S,x as P,j as x,w as F,k as m,J as I,P as j,e as D,T as ee,Q as te,R as Se,A as Me,S as ue,U as be,V as ye,O as se,z as w,n as T,l as A,_ as H,m as Re,W as xe,N as Te,X as Oe,Y as Le,G as Pe,K as De,p as Ae,q as Ue,Z as Ie,$ as ce}from"./index-cd259c12.js";import{a as je,u as qe,c as me,_ as pe}from"./index.esm-f474693d.js";import{V as W,f as Ne,a as Ee,d as Ge,C as X,g as ze,b as We,s as Ye}from"./CatalogService-ab128019.js";import"./browser-ponyfill-10e9505f.js";const He="/vue-ts-composition-ecommerce/map-pin.svg",Je={class:"relative block"},Ke={class:"absolute inset-y-0 left-0 flex items-center pl-4"},Qe=t("img",{src:He,alt:"Map Pin"},null,-1),Xe={key:0,src:je,alt:"Cross"},Ze=["value"],et={key:0,class:"absolute z-10 mt-2 max-h-[30vh] w-full overflow-y-auto overflow-x-hidden rounded-[10px] bg-white shadow-inputBase"},tt=["onMousedown"],st={class:"pl-[52px]"},at={key:1,class:"absolute z-10 mt-2 flex h-[56px] w-full items-center overflow-y-auto overflow-x-hidden rounded-[10px] bg-white text-gray-500 shadow-inputBase"},ot=t("li",{class:"py-2 transition first-of-type:rounded-t-[10px] first-of-type:rounded-b-none last-of-type:rounded-t-none last-of-type:rounded-b-[10px]"},[t("span",{class:"pl-[52px]"},"Nothing is found...")],-1),lt=[ot],it={class:"mt-1 text-xs text-error"},ge=V({__name:"BaseAutocomplete",props:{listData:{type:Array},modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:r}){const s=e,a=h({focused:!1,touched:!1}),o=k(()=>{var n;return(n=s.listData)==null?void 0:n.filter(p=>p.toLowerCase().includes(s.modelValue.toLowerCase()))}),d=n=>{a.value.touched=!0,r("update:modelValue",n)},i=n=>{a.value.touched=!0,r("update:modelValue",n)},v=()=>{r("update:modelValue","")},l=()=>a.value.focused=!0,f=()=>a.value.focused=!1;return(n,p)=>(c(),g("div",null,[t("div",Je,[t("span",Ke,[Z(n.$slots,"icon-left",{},()=>[Qe])]),t("span",{class:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-4",onClick:v},[Z(n.$slots,"icon-right",{},()=>[e.modelValue?(c(),g("img",Xe)):D("",!0)])]),t("input",E({name:"input",value:e.modelValue,onInput:p[0]||(p[0]=u=>d(u.target.value)),onFocus:l,onBlur:f},n.$attrs,{placeholder:"1",class:["peer block h-12 w-full rounded-[10px] px-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none",{"border-[1px] border-error text-error":e.error}]}),null,16,Ze),t("label",{for:"input",class:S(["pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium",{"text-error":e.error}])},P(e.label),3),x(ee,{name:"fade",mode:"out-in"},{default:F(()=>{var u,b;return[a.value.focused&&((u=m(o))!=null&&u.length)?(c(),g("ul",et,[(c(!0),g(I,null,j(m(o),y=>(c(),g("li",{class:"cursor-pointer py-2 transition first-of-type:rounded-t-[10px] first-of-type:rounded-b-none last-of-type:rounded-t-none last-of-type:rounded-b-[10px] hover:font-semibold",key:y,onMousedown:O=>i(y)},[t("span",st,P(y),1)],40,tt))),128))])):a.value.focused&&!((b=m(o))!=null&&b.length)?(c(),g("ul",at,lt)):D("",!0)]}),_:1})]),t("span",it,P(e.error),1)]))}}),nt="/vue-ts-composition-ecommerce/checkbox-checked-img.svg",rt=["title","for"],ct=["id","value"],ut={class:"absolute top-[3px] right-[0.5rem] z-10 w-6",src:nt,alt:"checked-icon"},dt=t("span",{class:"absolute right-[0.5rem] h-4 w-3 bg-inherit"},null,-1),mt={class:"line-clamp-1"},$e=V({__name:"BaseCheckBox",props:{modelValue:{type:[Array,Boolean]},inputBgClass:null,value:null,label:null,id:null},emits:["update:modelValue"],setup(e,{emit:r}){const s=e,a=k({get(){return s.modelValue},set(d){d&&r("update:modelValue",d)}}),o=k(()=>Array.isArray(s.modelValue)&&s.value?s.modelValue.includes(s.value):s.modelValue);return(d,i)=>(c(),g("label",{title:e.label,class:S(["relative flex h-full cursor-pointer items-center",{"font-semibold":m(o)}]),for:e.id},[t("div",{class:S(["relative",e.inputBgClass])},[te(t("input",{class:"form-checkbox my-1 mr-3 cursor-pointer rounded border p-3 text-transparent checked:border-gray-800 checked:hover:border-gray-800 focus:ring-0 focus:ring-offset-0 checked:focus:border-gray-800",id:e.id,type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=v=>Me(a)?a.value=v:null),value:e.value},null,8,ct),[[Se,m(a)]]),x(ee,{name:"fade"},{default:F(()=>[te(t("img",ut,null,512),[[ue,m(o)]])]),_:1}),dt],2),t("span",mt,P(e.label),1)],10,rt))}}),pt="/vue-ts-composition-ecommerce/calendar.svg",gt=e=>(be("data-v-cd9733f6"),e=e(),ye(),e),vt={class:"flex w-full flex-col"},ft={class:"relative w-full"},ht=gt(()=>t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-4"},[t("img",{src:pt,alt:"Calendar Icon"})],-1)),bt=["src"],yt=["value","min"],xt={class:"mt-1 text-xs text-error"},Pt=V({__name:"BaseDatePicker",props:{modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:r}){const s=e,a="/vue-ts-composition-ecommerce/",o=h(),d=new Date().toISOString().slice(0,10),i=h({focused:!1}),v=k(()=>s.modelValue?"/delete-icon.svg":"dropdown-arrow.svg"),l=u=>r("update:modelValue",u),f=()=>{o.value.showPicker(),i.value.focused=!0},n=()=>i.value.focused=!1,p=()=>{s.modelValue&&r("update:modelValue","")};return(u,b)=>(c(),g("div",vt,[t("div",ft,[ht,t("span",{class:S(["absolute inset-y-0 right-0 flex items-center px-3 transition",{"rotate-180":i.value.focused&&!s.modelValue}]),onMousedown:p},[t("img",{src:`${m(a)}${m(v)}`,alt:"Cross"},null,8,bt)],34),t("input",{ref_key:"datePicker",ref:o,type:"date",name:"input",value:e.modelValue,min:m(d),onInput:b[0]||(b[0]=y=>l(y.target.value)),onFocus:f,onBlur:n,placeholder:"1",class:S([{"border-[1px] border-error text-error":e.error},"h-12 cursor-text w-full min-w-[95%] rounded-[10px] bg-white px-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out focus:outline-none"])},null,42,yt),t("label",{for:"input",class:S([{"text-error":e.error},"pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium"])},P(e.label),3)]),t("span",xt,P(e.error),1)]))}});const ve=se(Pt,[["__scopeId","data-v-cd9733f6"]]),$t="/vue-ts-composition-ecommerce/clock.svg",_t=e=>(be("data-v-8550e742"),e=e(),ye(),e),Ct={class:"relative block"},kt=_t(()=>t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-4"},[t("img",{src:$t,alt:"Clock Icon"})],-1)),wt=["src"],Vt=["value"],Ft={class:"mt-1 text-xs text-error"},Bt=V({__name:"BaseTimePicker",props:{modelValue:{type:String,required:!0},label:{type:String,required:!0},error:{type:String}},emits:["update:modelValue"],setup(e,{emit:r}){const s=e,a="/vue-ts-composition-ecommerce/",o=h({focused:!1}),d=k(()=>s.modelValue?"/delete-icon.svg":"/dropdown-arrow.svg"),i=h(),v=p=>r("update:modelValue",p),l=()=>{var p;(p=i==null?void 0:i.value)==null||p.showPicker(),o.value.focused=!0},f=()=>o.value.focused=!1,n=()=>{s.modelValue&&r("update:modelValue","")};return(p,u)=>(c(),g("div",null,[t("div",Ct,[kt,t("span",{class:S(["absolute inset-y-0 right-0 flex items-center px-3 transition",{"rotate-180":o.value.focused&&!s.modelValue}]),onMousedown:n},[t("img",{src:`${m(a)}${m(d)}`,alt:"Cross"},null,8,wt)],34),t("input",E({ref_key:"timePicker",ref:i,type:"time",name:"input",value:e.modelValue,onInput:u[0]||(u[0]=b=>v(b.target.value)),onFocus:l,onBlur:f},p.$attrs,{class:[{"border-[1px] border-error text-error":e.error},"peer block h-12 w-full min-w-[95%] cursor-text rounded-[10px] bg-white pl-[52px] pt-5 font-medium text-gray-600 placeholder-transparent shadow-inputBase transition duration-300 ease-in-out placeholder-shown:pt-0 focus:outline-none"],placeholder:"1"}),null,16,Vt),t("label",{for:"input",class:S([{"text-error":e.error},"pointer-text pointer-events-none absolute top-1 pl-[52px] text-xs font-normal text-gray-600 transition-all peer-placeholder-shown:top-[12px] peer-placeholder-shown:text-base peer-placeholder-shown:font-medium"])},P(e.label),3)]),t("span",Ft,P(e.error),1)]))}});const fe=se(Bt,[["__scopeId","data-v-8550e742"]]),St={key:0,class:"bg-orange-base/5 py-8"},Mt=["onSubmit"],Rt={class:"container order-2 mx-auto grid items-center gap-4 px-4 pt-10 pb-8 md:order-1 md:grid-cols-2"},Tt={class:"h-full"},Ot={class:"grid h-full gap-4 lg:grid-cols-2"},Lt={class:"grid h-full gap-4 lg:grid-cols-2"},Dt={class:"container mx-auto flex justify-center pb-10"},At=V({__name:"LocationAndTimeForm",props:{isLoading:{type:Boolean,default:!1},activeLocationFilters:{type:Object}},emits:["updateLocationFilters"],setup(e,{expose:r,emit:s}){var u;const a=e,o=["New York","Los Angeles","Chicago","Houston","Philadelphia","Phoenix","San Antonio","San Diego","Dallas","San Jose","Austin","Jacksonville","San Francisco","Indianapolis","Columbus","Fort Worth","Charlotte","Seattle","Denver","El Paso","Detroit","Washington","Boston","Memphis","Nashville","Portland, Ore.","Oklahoma City","Las Vegas","Baltimore","Louisville","Milwaukee","Albuquerque","Tucson","Fresno","Sacramento","Kansas City, Mo.","Long Beach","Mesa","Atlanta","Colorado Springs","Virginia Beach","Raleigh","Omaha","Miami","Oakland","Minneapolis","Tulsa","Wichita","New Orleans","Arlington, Texas",""],d=window.innerWidth>=768,i=h(!1),v=b=>o.includes(b),l=h({pickupFrom:((u=a.activeLocationFilters)==null?void 0:u.pickupFrom)||"",dropOff:"",pickupDate:"",pickupTime:"",dropOffDate:"",dropOffTime:""});r({formValues:l}),w(l,b=>{i.value||(l.value.dropOff=b.pickupFrom)},{deep:!0});const f=async()=>{await p.value.$validate()&&s("updateLocationFilters",l.value)},n=k(()=>({pickupFrom:{location_validation:me.withMessage("Select a city from the list",v)},dropOff:{location_validation:me.withMessage("Select a city from the list",v)}})),p=qe(n,l,{$autoDirty:!0});return(b,y)=>(c(),T(xe,{"initial-visibility":d},{controls:F(({toggleVisibility:O,isTransitioning:R,isVisible:U})=>[!d&&!U?(c(),g("section",St,[x(H,{class:"mx-auto block","is-disabled":R,onClick:O},{default:F(()=>[A(" Choose Location ")]),_:2},1032,["is-disabled","onClick"])])):D("",!0)]),default:F(({isVisible:O})=>{var R,U;return[O?(c(),g("form",{key:0,onSubmit:Re(f,["prevent"]),class:"h-fit bg-orange-base/5"},[t("div",Rt,[x(ge,{modelValue:l.value.pickupFrom,"onUpdate:modelValue":y[0]||(y[0]=_=>l.value.pickupFrom=_),label:"Pick up from","list-data":o,error:(R=m(p).pickupFrom.$errors[0])==null?void 0:R.$message},null,8,["modelValue","error"]),t("div",Tt,[i.value?(c(),T(ge,{key:0,modelValue:l.value.dropOff,"onUpdate:modelValue":y[1]||(y[1]=_=>l.value.dropOff=_),label:"Drop-off","list-data":o,error:(U=m(p).dropOff.$errors[0])==null?void 0:U.$message},null,8,["modelValue","error"])):(c(),T($e,{key:1,modelValue:i.value,"onUpdate:modelValue":y[2]||(y[2]=_=>i.value=_),onChange:y[3]||(y[3]=_=>l.value.dropOff=""),"input-bg-class":"bg-transparent",label:"Return to different location",id:"1"},null,8,["modelValue"]))]),t("div",Ot,[x(ve,{modelValue:l.value.pickupDate,"onUpdate:modelValue":y[4]||(y[4]=_=>l.value.pickupDate=_),label:"Pick up date"},null,8,["modelValue"]),x(fe,{modelValue:l.value.pickupTime,"onUpdate:modelValue":y[5]||(y[5]=_=>l.value.pickupTime=_),label:"Pick up time"},null,8,["modelValue"])]),t("div",Lt,[x(ve,{modelValue:l.value.dropOffDate,"onUpdate:modelValue":y[6]||(y[6]=_=>l.value.dropOffDate=_),label:"Drop-off date"},null,8,["modelValue"]),x(fe,{modelValue:l.value.dropOffTime,"onUpdate:modelValue":y[7]||(y[7]=_=>l.value.dropOffTime=_),label:"Drop off time"},null,8,["modelValue"])])]),t("div",Dt,[x(H,{loading:e.isLoading,class:"w-[272px]"},{default:F(()=>[A("Search")]),_:1},8,["loading"])])],40,Mt)):D("",!0)]}),_:1}))}}),Ut="/vue-ts-composition-ecommerce/filters-icon.svg",It=["disabled","value"],jt=["value"],qt=["value"],Nt=V({__name:"BaseSelect",props:{selectOptions:{type:Object,required:!0},modelValue:{type:String},isLoading:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:r}){const s=a=>r("update:modelValue",a);return(a,o)=>(c(),g("select",{disabled:e.isLoading,class:S(["cursor-pointer appearance-none px-2 focus:outline-none",{"cursor-progress":e.isLoading}]),value:e.modelValue,onInput:o[0]||(o[0]=d=>s(d.target.value))},[t("option",{value:e.selectOptions.baseOption.value},P(e.selectOptions.baseOption.name),9,jt),(c(!0),g(I,null,j(e.selectOptions.options,d=>(c(),g("option",{key:d.value,value:d.value},P(d.name),9,qt))),128))],42,It))}});var Y=(e=>(e.RentalCost="rentalCost",e.ReleaseYear="releaseYear",e.Deposit="deposit",e))(Y||{});const Et={class:"flex justify-between pb-6"},Gt=t("img",{class:"md:hidden",src:Ut,alt:"Filters-icon mobile"},null,-1),zt=[Gt],Wt={class:"flex items-center gap-4"},Yt={class:"cursor-pointer"},Ht=["src"],Jt=V({__name:"CarsCatalogHeading",props:{isLoading:{type:Boolean},sortOrderASC:{type:Boolean},sortBy:{type:String}},emits:["toggle-sort-order","updateSortType","openMobileFilters"],setup(e,{emit:r}){const s=e,a="/vue-ts-composition-ecommerce/",o={baseOption:{value:Y.RentalCost,name:"Sort by price"},options:[{value:Y.ReleaseYear,name:"Sort by year"},{value:Y.Deposit,name:"Sort by deposit"}]},d=k(()=>s.sortOrderASC?"/sort-up.svg":"/sort-down.svg"),i=()=>{s.isLoading||r("toggle-sort-order")};return(v,l)=>(c(),g("div",Et,[t("div",{onClick:l[0]||(l[0]=f=>v.$emit("openMobileFilters"))},zt),t("div",Wt,[x(Nt,{isLoading:e.isLoading,modelValue:e.sortBy,"onUpdate:modelValue":l[1]||(l[1]=f=>v.$emit("updateSortType",f)),selectOptions:o},null,8,["isLoading","modelValue"]),t("span",Yt,[t("img",{src:`${m(a)}${m(d)}`,alt:"Sort by icon",onClick:i},null,8,Ht)])])]))}}),Kt="/vue-ts-composition-ecommerce/Icon-wallet.svg",Qt="/vue-ts-composition-ecommerce/Icon-door.svg",Xt="/vue-ts-composition-ecommerce/Icon-seats.svg",Zt="/vue-ts-composition-ecommerce/Icon-stearing-wheel.svg",es={class:"rounded-[10px] p-3 shadow-inputBase"},ts={class:"flex items-center gap-3 border-b pb-3 md:flex-col md:items-stretch md:gap-0 md:border-b-0 md:pb-0"},ss={class:"basis-1/2 rounded-[10px] md:basis-auto md:bg-car-bg"},as=["src"],os={class:"flex basis-1/2 flex-col items-start justify-center md:block md:basis-auto"},ls={class:"inline-block rounded border py-[2.5px] px-1 text-[10px] font-medium text-gray-400 md:mt-4"},is={class:"pt-1 text-[12px] font-semibold text-base-gray sm:pt-4 sm:text-[22px]"},ns={class:"flex items-center justify-between py-2 md:border-b md:py-4"},rs={class:"text-sm text-orange-base sm:text-base"},cs={class:"text-base font-semibold sm:text-[25px]"},us=t("span",{class:"text-xs"},"/ day",-1),ds={class:"hidden text-base text-base-gray md:block"},ms={class:"flex items-center justify-between gap-2 pt-4 text-[12px] font-semibold text-gray-400 sm:pb-8 sm:text-base md:gap-0"},ps={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:hidden md:basis-auto md:bg-transparent md:py-0"},gs=t("img",{class:"h-[17px] pr-2",src:Kt,alt:"Doors icon"},null,-1),vs=t("div",{class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},[t("img",{class:"h-[17px] pr-2",src:Qt,alt:"Doors icon"}),A(" 4 "),t("span",{class:"hidden pl-1 md:block"},"doors")],-1),fs={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},hs=t("img",{class:"h-[17px] pr-2",src:Xt,alt:"Seats icon"},null,-1),bs=t("span",{class:"hidden pl-1 md:block"},"seats",-1),ys={class:"flex basis-1/4 items-center justify-center rounded bg-car-bg py-[6.5px] md:basis-auto md:bg-transparent md:py-0"},xs=t("img",{class:"h-[17px] pr-2",src:Zt,alt:"Transmission icon"},null,-1),Ps={class:"pl-1"},$s=V({__name:"CarCard",props:{vehicle:{type:Object,required:!0}},setup(e){const r="/vue-ts-composition-ecommerce/";return(s,a)=>{const o=Te("router-link");return c(),g("div",es,[t("div",ts,[t("div",ss,[t("img",{class:"mx-auto",src:`${m(r)}${e.vehicle.imgPath}`,alt:"Car"},null,8,as)]),t("div",os,[t("span",ls,P(e.vehicle.releaseYear),1),t("h2",is,P(e.vehicle.model),1),t("div",ns,[t("div",rs,[A(" From "),t("span",cs,"$"+P(e.vehicle.rentalCost),1),us]),t("div",ds,"Deposit "+P(e.vehicle.deposit)+"$",1)])])]),t("div",null,[t("div",ms,[t("div",ps,[gs,A(" "+P(e.vehicle.deposit)+"$ ",1)]),vs,t("div",fs,[hs,A(" "+P(e.vehicle.capacity)+" ",1),bs]),t("div",ys,[xs,t("span",Ps,P(e.vehicle.transmission),1)])]),x(o,{to:`/catalog/${e.vehicle.id}`},{default:F(()=>[x(H,{class:"hidden w-full sm:block"},{default:F(()=>[A("Rent now")]),_:1})]),_:1},8,["to"])])])}}}),_s={class:"mb-10 grid gap-4 lg:grid-cols-2"},Cs=V({__name:"VehicleCardsSection",props:{vehicles:{type:Array,required:!0}},setup(e){return(r,s)=>(c(),g("section",_s,[(c(!0),g(I,null,j(e.vehicles,a=>(c(),T($s,{key:a.id,vehicle:a},null,8,["vehicle"]))),128))]))}}),ks={class:"mt-4 flex justify-center text-base-gray"},ws=["onClick"],Vs=V({__name:"BasePaginator",props:{totalEntities:null,entitiesPerPage:null,maxVisibleButtons:null,currentPage:null,paginationButtonClass:null},emits:["changeCurrentPage"],setup(e,{emit:r}){const s=e,a=k(()=>Math.ceil(s.totalEntities/s.entitiesPerPage)),o=l=>{l<1||l>a.value||l===s.currentPage||r("changeCurrentPage",l)},d=k(()=>s.currentPage===1?1:s.currentPage===a.value?a.value-s.maxVisibleButtons+1:s.currentPage-1),i=k(()=>Math.min(d.value+s.maxVisibleButtons-1,a.value)),v=k(()=>{const l=[];for(let f=d.value;f<=i.value;f+=1)f!==0&&l.push({name:f,isDisabled:f===s.currentPage});return l});return(l,f)=>(c(),g("section",ks,[t("span",{class:S(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===1}]]),onClick:f[0]||(f[0]=n=>o(1))}," First ",2),(c(!0),g(I,null,j(m(v),n=>(c(),g("span",{class:S(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===n.name,"cursor-not-allowed":n.isDisabled}]]),key:n.name,onClick:p=>o(n.name)},P(n.name),11,ws))),128)),t("span",{class:S(["cursor-pointer p-[14px]",[e.paginationButtonClass,{"font-bold text-orange-base":e.currentPage===m(a)}]]),onClick:f[1]||(f[1]=n=>o(m(a)))}," Last ",2)]))}}),Fs={},Bs={class:"mb-10 grid gap-4 lg:grid-cols-2"},Ss=Oe('<div class="flex items-center gap-4 md:flex-col md:items-stretch"><div class="mb-4 flex h-[110px] basis-1/2 items-center justify-center rounded bg-gray-300 dark:bg-gray-700 sm:h-[180px] md:h-48 md:basis-auto"></div><div class="flex h-full basis-1/2 flex-col md:basis-auto"><div class="mb-4 h-2.5 w-48 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="mb-2.5 h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-2 rounded-full bg-gray-200 dark:bg-gray-700"></div></div></div><div class="border-b border-b-gray-200 sm:mb-3 sm:mt-7"></div><div class="py-2 sm:py-4"><div class="flex h-7 gap-2"><div class="flex w-full basis-1/3 rounded bg-gray-200"></div><div class="flex w-full basis-1/3 rounded bg-gray-200"></div><div class="flex w-full basis-1/3 rounded bg-gray-200"></div></div></div><div class="hidden h-12 rounded bg-gray-200 sm:block"></div><span class="sr-only">Loading...</span>',5),Ms=[Ss];function Rs(e,r){return c(),g("section",Bs,[(c(!0),g(I,null,j([...Array(6).keys()],(s,a)=>(c(),g("div",{key:a,role:"status",class:"w-full animate-pulse rounded-[10px] border-gray-200 p-4 shadow-inputBase dark:border-gray-700 md:h-[505px]"},Ms))),128))])}const he=se(Fs,[["render",Rs]]),Ts={class:"col-span-12 mb-4 md:col-span-8 md:col-start-6 lg:col-span-9 lg:col-start-5"},Os={key:0},Ls={key:2,class:"p-10 text-center text-5xl"},Ds={key:3,class:"p-10 text-center text-5xl"},As=V({__name:"CarsCatalog",props:{vehicles:{type:Array,required:!0},carsTotal:{type:Number,required:!0},currentPage:{type:Number,required:!0},shouldAppendPage:{type:Boolean,required:!0},isLoading:{type:Boolean},sortOrderASC:{type:Boolean},sortBy:{type:String},error:{type:String}},emits:["appendPage"],setup(e,{emit:r}){const s=e,a=k(()=>s.currentPage===Math.ceil(s.carsTotal/W)),o=()=>r("appendPage");return(d,i)=>(c(),g("section",Ts,[x(Jt,E(d.$attrs,{"sort-by":e.sortBy,"sort-order-a-s-c":e.sortOrderASC,"is-loading":e.isLoading}),null,16,["sort-by","sort-order-a-s-c","is-loading"]),x(ee,{name:"fade",mode:"out-in"},{default:F(()=>[!e.isLoading||e.shouldAppendPage?(c(),g("div",Os,[x(Cs,{vehicles:e.vehicles},null,8,["vehicles"]),x(ee,{name:"fade",mode:"out-in"},{default:F(()=>[e.shouldAppendPage?(c(),T(he,{key:0})):D("",!0)]),_:1})])):e.isLoading?(c(),T(he,{key:1})):e.error?(c(),g("h1",Ls,"Something went wrong... "+P(e.error),1)):e.vehicles.length?D("",!0):(c(),g("h1",Ds,"Nothing was found"))]),_:1}),e.vehicles.length&&!e.error?(c(),T(H,{key:0,"is-disabled":m(a),loading:e.isLoading,variant:"transparent",class:"w-full",onClick:o},{default:F(()=>[A(" Show more ")]),_:1},8,["is-disabled","loading"])):D("",!0),e.vehicles.length&&!e.error?(c(),T(Vs,E({key:1,"max-visible-buttons":3,"current-page":e.currentPage,"total-entities":e.carsTotal,"entities-per-page":m(W)},d.$attrs),null,16,["current-page","total-entities","entities-per-page"])):D("",!0)]))}}),Us="/vue-ts-composition-ecommerce/burger-closed.svg",Is={class:"relative"},js=["min","max","value","title","disabled"],qs=["min","max","title","value","disabled"],Ns=V({__name:"BaseRangeSlider",props:{minPrice:null,maxPrice:null,sliderMinValue:null,sliderMaxValue:null,minGap:null,isLoading:{type:Boolean}},emits:["update:minPrice","update:maxPrice"],setup(e,{emit:r}){const s=e,a=i=>r("update:minPrice",i);w(()=>s.minPrice,i=>{!i||!s.maxPrice||s.maxPrice-i<=s.minGap&&r("update:minPrice",s.maxPrice-s.minGap)});const o=i=>r("update:maxPrice",i);w(()=>s.maxPrice,i=>{i===0&&r("update:maxPrice",null),!(!i||!s.minPrice)&&i-s.minPrice<=s.minGap&&r("update:maxPrice",s.minPrice+s.minGap)});const d=k(()=>{const i=s.minPrice||0,v=s.maxPrice||0,l=(i-s.sliderMinValue)/(s.sliderMaxValue-s.sliderMinValue)*100,f=(v-s.sliderMinValue)/(s.sliderMaxValue-s.sliderMinValue)*100;return`linear-gradient(to right, #8F8F8F ${l}% , #E85638 ${l}% , #E85638 ${f}%, #8F8F8F ${f}%)`});return(i,v)=>(c(),g("div",Is,[t("div",{class:"slider-track",style:Le({background:m(d)})},null,4),t("input",{type:"range",min:e.sliderMinValue,max:e.sliderMaxValue,value:e.minPrice,title:e.minPrice,disabled:e.isLoading,onInput:v[0]||(v[0]=l=>a(l.target.value))},null,40,js),t("input",{type:"range",min:e.sliderMinValue,max:e.sliderMaxValue,title:e.maxPrice,value:e.maxPrice,disabled:e.isLoading,onInput:v[1]||(v[1]=l=>o(l.target.value))},null,40,qs)]))}});const Es={class:"mb-8"},Gs=t("h2",{class:"mb-[20px] font-semibold text-gray-600"},"Rent price (per day)",-1),zs={class:"flex items-center"},Ws=t("span",{class:"px-1"},"-",-1),Ys={class:"flex flex-col py-6"},Hs=V({__name:"PriceRangeFilter",props:{isLoading:{type:Boolean,default:!1},initialPriceBoundaries:{type:Object,required:!0},priceRange:{type:Object}},emits:["updatePriceRange"],setup(e,{expose:r,emit:s}){var f,n;const a=e,o=h(((f=a.priceRange)==null?void 0:f.minPrice)||a.initialPriceBoundaries.minPrice),d=h(((n=a.priceRange)==null?void 0:n.maxPrice)||a.initialPriceBoundaries.maxPrice);r({minPrice:o,maxPrice:d});const i=m(a.initialPriceBoundaries.minPrice),v=m(a.initialPriceBoundaries.maxPrice),l=k(()=>({minPrice:o.value,maxPrice:d.value}));return w([o,d],()=>s("updatePriceRange",l.value)),(p,u)=>(c(),g("section",Es,[Gs,t("div",zs,[x(pe,{disabled:e.isLoading,type:"number",label:"From",modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=b=>o.value=b),modelModifiers:{number:!0}},null,8,["disabled","modelValue"]),Ws,x(pe,{disabled:e.isLoading,type:"number",label:"To",modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=b=>d.value=b),modelModifiers:{number:!0}},null,8,["disabled","modelValue"])]),t("div",Ys,[x(Ns,{minPrice:o.value,"onUpdate:minPrice":u[2]||(u[2]=b=>o.value=b),minPriceModifiers:{number:!0},maxPrice:d.value,"onUpdate:maxPrice":u[3]||(u[3]=b=>d.value=b),maxPriceModifiers:{number:!0},"min-gap":5,"slider-min-value":m(i),"slider-max-value":m(v),"is-loading":e.isLoading},null,8,["minPrice","maxPrice","slider-min-value","slider-max-value","is-loading"])])]))}}),Js=["onClick"],Ks={class:"flex"},Qs=t("h2",null,"From",-1),Xs=["src"],Zs={class:"flex flex-col gap-2"},ea={class:"flex items-center"},ta={class:"ml-1 text-[13px] text-gray-400"},sa=V({__name:"CarCollapsibleFilter",props:{vehiclesCountFilter:null,vehiclesMinRentalCostByFilter:null,filterType:null},setup(e,{expose:r,emit:s}){const a=e,o="/vue-ts-composition-ecommerce/",d=l=>`update${l.charAt(0).toUpperCase()+l.slice(1)}Filters`,i=l=>a.filterType==="babySeat"||a.filterType=="videoRecorder"?l==="true"?"Yes":"No":l,v=h([]);return r({activeCarFilters:v}),w(v,()=>s(d(a.filterType),v.value)),(l,f)=>(c(),T(xe,{class:"mb-8 w-full","initial-visibility":!0},{controls:F(({toggleVisibility:n,isVisible:p})=>[t("div",{class:"mb-[20px] flex justify-between font-semibold text-gray-600",role:"button",onClick:n},[t("h2",null,P(m(Ne)[e.filterType]),1),t("div",Ks,[Qs,t("img",{class:S(["ml-4 transition duration-500",{"rotate-180":p}]),src:`${m(o)}dropdown-arrow.svg`,alt:"Cross"},null,10,Xs)])],8,Js)]),default:F(({isVisible:n})=>[te(t("div",null,[t("section",Zs,[(c(!0),g(I,null,j(e.vehiclesCountFilter,(p,u)=>{var b;return c(),g("div",{class:"flex items-center justify-between",key:u},[t("div",ea,[x($e,{id:`${e.filterType}${u}`,modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=y=>v.value=y),label:i(u),value:u,"input-bg-class":"bg-white"},null,8,["id","modelValue","label","value"]),t("span",ta," ("+P(p||0)+") ",1)]),t("p",null,"$"+P(((b=e.vehiclesMinRentalCostByFilter)==null?void 0:b[u])||0),1)])}),128))])],512),[[ue,n]])]),_:1}))}}),aa={class:"absolute z-10 h-full w-full cursor-wait backdrop-grayscale"},oa=V({__name:"CarsCatalogFilters",props:{isOpen:{type:Boolean},isLoading:{type:Boolean},initialPriceBoundaries:null,priceRange:null,vehiclesCountByFilter:null,minRentalCostByFilter:null},emits:["resetFilters","disableWatchers"],setup(e,{emit:r}){const s=e,a=h(),o=h(),d=async()=>{var n,p,u;r("disableWatchers"),await Pe(),a.value&&(a.value.minPrice=(n=s.initialPriceBoundaries)==null?void 0:n.minPrice,a.value.maxPrice=(p=s.initialPriceBoundaries)==null?void 0:p.maxPrice),(u=o.value)==null||u.forEach(b=>b.activeCarFilters.length=0),r("resetFilters")},i=k(()=>{var n;return(n=o.value)==null?void 0:n.find(p=>p.activeCarFilters.length!==0)}),v=k(()=>{const{minPrice:n,maxPrice:p}=s.priceRange,{minPrice:u,maxPrice:b}=s.initialPriceBoundaries;return n!==u||p!==b}),l=k(()=>[v.value,i.value]),f=k(()=>!l.value.find(n=>n));return(n,p)=>(c(),g("aside",{class:S(["md:z-1 fixed top-0 left-0 z-10 flex h-fit min-h-[100vh] w-full flex-col items-center overflow-hidden overflow-y-auto bg-white p-5 transition-[opacity] duration-300 ease-in md:pointer-events-auto md:relative md:col-span-4 md:w-auto md:overflow-y-hidden md:p-1 md:opacity-100 lg:col-span-3",e.isOpen?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"])},[te(t("div",aa,null,512),[[ue,e.isLoading]]),t("img",{onClick:p[0]||(p[0]=u=>n.$emit("closeMobileFilters")),class:"absolute top-0 right-0 p-4 md:hidden",src:Us,alt:"Burger close icon"}),e.initialPriceBoundaries.minPrice?(c(),T(Hs,E({key:0,ref_key:"priceRangeFilter",ref:a,"initial-price-boundaries":e.initialPriceBoundaries,"price-range":e.priceRange,"is-loading":e.isLoading},n.$attrs),null,16,["initial-price-boundaries","price-range","is-loading"])):D("",!0),e.vehiclesCountByFilter&&e.minRentalCostByFilter?(c(!0),g(I,{key:1},j(m(Ee),u=>(c(),T(sa,E({key:u},n.$attrs,{ref_for:!0,ref_key:"collapsibleFilters",ref:o,"vehicles-count-filter":e.vehiclesCountByFilter[u],"vehicles-min-rental-cost-by-filter":e.minRentalCostByFilter[u],"filter-type":u}),null,16,["vehicles-count-filter","vehicles-min-rental-cost-by-filter","filter-type"]))),128)):D("",!0),x(H,{onClick:d,variant:"transparent",class:"mb-10 w-full md:mb-0","is-disabled":m(f)},{default:F(()=>[A(" Reset ")]),_:1},8,["is-disabled"])],2))}}),la={},ia={class:"container relative order-3 mx-auto grid h-full grid-cols-12 px-4"};function na(e,r){return c(),g("section",ia,[Z(e.$slots,"filters"),Z(e.$slots,"cars")])}const ra=se(la,[["render",na]]),ca={class:"container order-1 mx-auto px-4 md:order-2"},ua={class:"py-3 text-2xl font-bold text-gray-600 md:py-10 md:text-3xl"},da={class:"text-sm font-semibold text-gray-400 md:text-base"},ma=V({__name:"PageHeading",props:{heading:{type:String,required:!0},carsTotal:{type:Number,required:!0}},setup(e){return(r,s)=>(c(),g("div",ca,[t("h1",ua,[A(P(e.heading)+" ",1),t("span",da,"("+P(e.carsTotal)+")",1)])]))}}),pa=({currentPage:e,sortOrderASC:r,sortBy:s,activeLocationFilters:a,priceRange:o,activeCarTypeFilters:d,activeCarModelFilters:i,activeCarCapacityFilters:v,activeCarTransmissionFilters:l,activeCarDepositFilters:f,activeCarBabySeatFilters:n,activeCarVideoRecorderFilters:p})=>{const u=h([]),b=h(0),y=h(null),O=h(!0),R=h({minPrice:null,maxPrice:null}),U=h(null),_=h(null),J=k(()=>({offset:e.value*W-W,limit:e.value*W-1})),q=async({append:C}={append:!1})=>{try{y.value=null,O.value=!0,await Ge(500);const{data:B,count:G,error:oe}=await X.getAllVehicles({sortBy:s.value,sortOrderASC:r.value,offset:J.value.offset,limit:J.value.limit,location:a.value.pickupFrom,priceRange:o.value,carTypes:d.value,carModels:i.value,carCapacities:v.value,carTransmission:l.value,carDeposit:f.value,carBabySeat:n.value,carVideoRecorder:p.value});if(B&&!C&&(u.value=B),B&&C&&u.value.push(...B),(G||G===0)&&(b.value=G),oe)throw new Error("Nothing was found...")}catch(B){console.error(B),B instanceof Error&&(y.value=B.message)}finally{O.value=!1}},ae=async()=>{const{minPrice:C,maxPrice:B}=await X.getPriceRange();R.value={minPrice:C,maxPrice:B}},L=async()=>{U.value=await X.getVehiclesCountGroupedByFilterType({priceRange:o.value,location:a.value.pickupFrom})},K=async()=>{_.value=await X.getMinRentalCostGroupedByFilterType({priceRange:o.value,location:a.value.pickupFrom})};return De(async()=>await Promise.all([q(),ae(),L(),K()])),{vehicles:u,vehiclesCount:b,errorMessage:y,isLoading:O,fetchVehicles:q,fetchVehiclesCount:L,fetchMinRentalCostByFilterType:K,initialPriceBoundaries:R,vehiclesCountGroupedByFilterType:U,minRentalCostGroupedByFilterType:_}},ga=e=>{const r=Ae(),s=Ue();for(const a in s.query)e[a]&&(e[a].value=ze(e[a].value,s.query[a]));w(Object.values(e),()=>{const a={};for(const o in e)e[o].value!==""&&e[o].value&&(a[o]=e[o].value);r.replace({query:a})},{deep:!0})},va={class:"flex h-full w-full flex-col"},xa=V({__name:"CatalogPage",setup(e){const r=h(!1),s=()=>o.value=!0,a=async()=>{i.value.pickupFrom="",d.value&&(d.value.formValues.pickupFrom=""),Object.assign(L.value,{minPrice:ie.value.minPrice,maxPrice:ie.value.maxPrice}),await Pe(),await Promise.all([M(),ne(),re()]),o.value=!1,Ye()},o=h(!1),d=h(),i=h({pickupFrom:""}),v=$=>{Object.assign(i.value,$)};w(i,()=>{o.value||(console.log("location watcher trigger"),C.value=1,Promise.all([M(),ne(),re()]))},{deep:!0});const l=h([]),f=$=>l.value=$;w(l,()=>{o.value||(console.log("car types watcher trigger"),C.value=1,M())});const n=h([]),p=$=>n.value=$;w(n,()=>{o.value||(console.log("car models watcher trigger"),C.value=1,M())});const u=h([]),b=$=>u.value=$;w(u,()=>{o.value||(console.log("car capacity watcher trigger"),C.value=1,M())});const y=h([]),O=$=>y.value=$;w(y,()=>{o.value||(console.log("car transmission watcher trigger"),C.value=1,M())});const R=h([]),U=$=>R.value=$;w(R,()=>{o.value||(console.log("car deposit watcher trigger"),C.value=1,M())});const _=h([]),J=$=>_.value=$;w(_,()=>{o.value||(console.log("car baby seat watcher trigger"),C.value=1,M())});const q=h([]),ae=$=>q.value=$;w(q,()=>{o.value||(console.log("car video recorder watcher trigger"),C.value=1,M())});const L=h({minPrice:0,maxPrice:0}),K=We($=>Object.assign(L.value,$),500,o);w(L,()=>{o.value||(console.log("price range watcher trigger"),C.value=1,Promise.all([M(),ne(),re()]))},{deep:!0});const C=h(1),B=h(!1),G=()=>{B.value=!0,C.value+=1},oe=$=>C.value=$;w(C,async()=>{if(console.log("page trigger"),B.value){await M({append:!0}),B.value=!1;return}await M()});const N=h(!0),z=h(Y.RentalCost),_e=()=>N.value=!N.value,Ce=$=>z.value=$;w([z,N],()=>M()),Ie(r);const{vehicles:ke,vehiclesCount:de,isLoading:le,errorMessage:we,initialPriceBoundaries:ie,vehiclesCountGroupedByFilterType:Ve,minRentalCostGroupedByFilterType:Fe,fetchVehicles:M,fetchVehiclesCount:ne,fetchMinRentalCostByFilterType:re}=pa({currentPage:C,sortOrderASC:N,sortBy:z,activeLocationFilters:i,priceRange:L,activeCarTypeFilters:l,activeCarModelFilters:n,activeCarCapacityFilters:u,activeCarTransmissionFilters:y,activeCarDepositFilters:R,activeCarBabySeatFilters:_,activeCarVideoRecorderFilters:q});return ga({page:C,sortOrderASC:N,sortBy:z,location:ce(i.value,"pickupFrom"),minPrice:ce(L.value,"minPrice"),maxPrice:ce(L.value,"maxPrice")}),($,Q)=>(c(),g("div",va,[x(At,{ref_key:"locationAndTimeForm",ref:d,"active-location-filters":i.value,"is-loading":m(le),onUpdateLocationFilters:v},null,8,["active-location-filters","is-loading"]),x(ma,{heading:"Our cars","cars-total":m(de)},null,8,["cars-total"]),x(ra,null,{filters:F(()=>[x(oa,{"initial-price-boundaries":m(ie),"price-range":L.value,"is-open":r.value,"is-loading":m(le),"vehicles-count-by-filter":m(Ve),"min-rental-cost-by-filter":m(Fe),onDisableWatchers:s,onResetFilters:a,onCloseMobileFilters:Q[0]||(Q[0]=Be=>r.value=!1),onUpdatePriceRange:m(K),onUpdateCarTypeFilters:f,onUpdateModelFilters:p,onUpdateCapacityFilters:b,onUpdateTransmissionFilters:O,onUpdateDepositFilters:U,onUpdateVideoRecorderFilters:ae,onUpdateBabySeatFilters:J},null,8,["initial-price-boundaries","price-range","is-open","is-loading","vehicles-count-by-filter","min-rental-cost-by-filter","onUpdatePriceRange"])]),cars:F(()=>[x(As,{"sort-by":z.value,vehicles:m(ke),error:m(we),"is-loading":m(le),"current-page":C.value,"cars-total":m(de),"should-append-page":B.value,"sort-order-a-s-c":N.value,onAppendPage:G,onUpdateSortType:Ce,onToggleSortOrder:_e,onChangeCurrentPage:oe,onOpenMobileFilters:Q[1]||(Q[1]=Be=>r.value=!0)},null,8,["sort-by","vehicles","error","is-loading","current-page","cars-total","should-append-page","sort-order-a-s-c"])]),_:1})]))}});export{xa as default};
